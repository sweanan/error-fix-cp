apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: grafana
  namespace: infrastructure
spec:
  values:
    dashboardProviders:
      dashboardproviders.yaml:
        apiVersion: 1
        providers:
          - name: "default"
            orgId: 1
            folder: ""
            type: file
            disableDeletion: false
            editable: true
            options:
              path: /var/lib/grafana/dashboards
    dashboards:
      default:
        istio-mesh:
          gnetId: 7639
          datasource: Prometheus
        istio-service:
          gnetId: 7636
          datasource: Prometheus
        istio-workload:
          gnetId: 7630
          datasource: Prometheus
        istio-performance:
          gnetId: 11829
          datasource: Prometheus
        istio-control-plane:
          gnetId: 7645
          datasource: Prometheus
        rabbitmq-overview:
          gnetId: 10991
          datasource: Prometheus
        elasticsearch:
          gnetId: 6483
          datasource: Prometheus
        kubernetes-status:
          json: |
            {"annotations":{"list":[{"$$hashKey":"object:3607","builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"description":"Summary metrics about containers running on Kubernetes nodes.\r\n\r\nDashboard was taken from here.  This version does not reqiure you to\r\nsetup the Kubernetes-app plugin. (https://github.com/grafana/kubernetes-app)\r\n\r\nUse this Helm chart to launch Grafana into a Kubernetes cluster.  It will include this dashboard and many more dashboards to give you visibility into the Kubernetes Cluster. (https://github.com/sekka1/cloud-public/tree/master/kubernetes/pods/grafana-helm)","editable":true,"gnetId":6417,"graphTooltip":1,"id":1,"iteration":1633486328511,"links":[{"asDropdown":true,"icon":"external link","includeVars":true,"keepTime":false,"tags":["kubernetes-app"],"title":"Dashboards","type":"dashboards"}],"panels":[{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":28,"panels":[],"title":"Pods","type":"row"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"fixedColor":"#629e51","mode":"fixed"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":12,"x":0,"y":1},"id":30,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.0.5","targets":[{"exemplar":true,"expr":"sum(kube_pod_status_phase{namespace=~\"$namespace\", phase=\"Running\", job=\"kubernetes-service-endpoints\"})","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Pods Running","type":"stat"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"fixedColor":"#629e51","mode":"fixed"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":12,"x":12,"y":1},"id":31,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.0.5","targets":[{"exemplar":true,"expr":"sum(kube_pod_status_phase{namespace=~\"$namespace\", phase=\"Pending\", job=\"kubernetes-service-endpoints\"})","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Pods Pending","type":"stat"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"fixedColor":"#629e51","mode":"fixed"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":8,"x":0,"y":4},"id":32,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.0.5","targets":[{"exemplar":true,"expr":"sum(kube_pod_status_phase{namespace=~\"$namespace\", phase=\"Failed\", job=\"kubernetes-service-endpoints\"})","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Pods Failed","type":"stat"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"fixedColor":"#629e51","mode":"fixed"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":8,"x":8,"y":4},"id":33,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.0.5","targets":[{"exemplar":true,"expr":"count(kube_pod_status_phase{namespace=~\"$namespace\", phase=\"Succeeded\", job=\"kubernetes-service-endpoints\"})","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Pods Succeeded","type":"stat"},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":7},"id":14,"panels":[],"title":"Deployments","type":"row"},{"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"auto","displayMode":"color-background"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"super-light-blue","value":null}]}},"overrides":[]},"gridPos":{"h":5,"w":6,"x":0,"y":8},"id":16,"links":[],"options":{"showHeader":true},"pluginVersion":"8.0.5","targets":[{"exemplar":true,"expr":"kube_deployment_status_replicas{namespace=~\"$namespace\",job=\"kubernetes-service-endpoints\"}","format":"table","instant":true,"interval":"","intervalFactor":1,"legendFormat":"{{ deployment }}","refId":"A"}],"title":"Deployment Replicas - Up To Date","transformations":[{"id":"organize","options":{"excludeByName":{"Time":true,"Value":true,"__name__":true,"instance":true,"job":true},"indexByName":{"Time":0,"Value":6,"__name__":1,"deployment":3,"instance":4,"job":5,"namespace":2},"renameByName":{"deployment":"Deployment ","namespace":"Namespace "}}},{"id":"merge","options":{"reducers":[]}}],"type":"table"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":5,"w":6,"x":6,"y":8},"id":52,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.0.5","targets":[{"exemplar":true,"expr":"sum(kube_deployment_status_replicas{namespace=~\"$namespace\",job=\"kubernetes-service-endpoints\"})","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Deployment Replicas","type":"stat"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":5,"w":6,"x":12,"y":8},"id":20,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.0.5","targets":[{"exemplar":true,"expr":"sum(kube_deployment_status_replicas_unavailable{namespace=~\"$namespace\",job=\"kubernetes-service-endpoints\"})","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Deployment Replicas - Unavailable","type":"stat"},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":13},"id":51,"panels":[],"title":"Misc","type":"row"},{"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"auto","displayMode":"auto"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"rgba(215, 197, 171, 1)","value":null}]}},"overrides":[{"matcher":{"id":"byName","options":"Metric"},"properties":[{"id":"unit","value":"none"},{"id":"custom.displayMode","value":"color-background"},{"id":"custom.align","value":null},{"id":"displayName","value":"Name"},{"id":"mappings","value":[{"options":{"secret":{"index":0,"text":"label_values(kube_secret_info,secret)"}},"type":"value"}]}]}]},"gridPos":{"h":9,"w":4,"x":0,"y":14},"id":53,"links":[],"options":{"showHeader":false,"sortBy":[{"desc":true,"displayName":" Foo"}]},"pluginVersion":"8.0.5","targets":[{"exemplar":true,"expr":"kube_secret_info{namespace=~\"$namespace\"}","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"{{ secret}}","refId":"A"}],"title":"Secrets","transformations":[{"id":"seriesToRows","options":{"reducers":[]}},{"id":"organize","options":{"excludeByName":{"Time":true,"Value":true},"indexByName":{},"renameByName":{}}}],"type":"table"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":9,"w":2,"x":4,"y":14},"id":19,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.0.5","targets":[{"exemplar":true,"expr":"sum(kube_secret_info{namespace=~\"$namespace\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Total Secrets","type":"stat"},{"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"auto","displayMode":"color-background","filterable":true},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"rgba(174, 195, 161, 1)","value":null}]}},"overrides":[{"matcher":{"id":"byName","options":"Time"},"properties":[{"id":"displayName","value":"Time"},{"id":"unit","value":"time: YYYY-MM-DD HH:mm:ss"},{"id":"custom.align","value":null}]},{"matcher":{"id":"byName","options":"Metric"},"properties":[{"id":"unit","value":"none"},{"id":"custom.displayMode","value":"color-background"},{"id":"custom.align","value":null},{"id":"thresholds","value":{"mode":"absolute","steps":[{"color":"rgba(245, 54, 54, 0.9)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":0},{"color":"rgba(50, 172, 45, 0.97)","value":0},{"value":null}]}}]},{"matcher":{"id":"byName","options":"ip"},"properties":[{"id":"custom.width","value":148}]}]},"gridPos":{"h":9,"w":5,"x":6,"y":14},"id":57,"links":[],"options":{"showHeader":true,"sortBy":[]},"pluginVersion":"8.0.5","targets":[{"exemplar":true,"expr":"kube_service_status_load_balancer_ingress{namespace=~\"$namespace\",job=\"kubernetes-service-endpoints\"}","format":"table","instant":true,"interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"External Ip","transformations":[{"id":"merge","options":{"reducers":[]}},{"id":"organize","options":{"excludeByName":{"Time":true,"Value":true,"__name__":true,"instance":true,"job":true,"namespace":false},"indexByName":{"Time":3,"Value":7,"__name__":4,"instance":5,"ip":1,"job":6,"namespace":0,"service":2},"renameByName":{"Time":"","ip":"IP","namespace":"Namespace","service":"Service Name"}}}],"type":"table"},{"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"auto","displayMode":"color-background","filterable":true},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"rgba(174, 195, 161, 1)","value":null}]}},"overrides":[{"matcher":{"id":"byName","options":"Time"},"properties":[{"id":"displayName","value":"Time"},{"id":"unit","value":"time: YYYY-MM-DD HH:mm:ss"},{"id":"custom.align","value":null}]},{"matcher":{"id":"byName","options":"Metric"},"properties":[{"id":"unit","value":"none"},{"id":"custom.displayMode","value":"color-background"},{"id":"custom.align","value":null},{"id":"thresholds","value":{"mode":"absolute","steps":[{"color":"rgba(245, 54, 54, 0.9)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":0},{"color":"rgba(50, 172, 45, 0.97)","value":0},{"value":null}]}}]}]},"gridPos":{"h":9,"w":4,"x":11,"y":14},"id":58,"links":[],"options":{"showHeader":true,"sortBy":[]},"pluginVersion":"8.0.5","targets":[{"exemplar":true,"expr":"kube_namespace_created{namespace=~\"$namespace\",job=\"kubernetes-service-endpoints\"}","format":"table","instant":true,"interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Namespaces","transformations":[{"id":"merge","options":{"reducers":[]}},{"id":"organize","options":{"excludeByName":{"Time":true,"Value":true,"__name__":true,"instance":true,"job":true,"namespace":false},"indexByName":{"Time":3,"Value":7,"__name__":4,"instance":5,"ip":1,"job":6,"namespace":0,"service":2},"renameByName":{"Time":"","ip":"IP","namespace":"Name","service":"Service Name"}}}],"type":"table"},{"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"auto","displayMode":"color-background","filterable":true},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"super-light-blue","value":null}]}},"overrides":[{"matcher":{"id":"byName","options":"Time"},"properties":[{"id":"displayName","value":"Time"},{"id":"unit","value":"time: YYYY-MM-DD HH:mm:ss"},{"id":"custom.align","value":null}]},{"matcher":{"id":"byName","options":"Metric"},"properties":[{"id":"unit","value":"none"},{"id":"custom.displayMode","value":"color-background"},{"id":"custom.align","value":null},{"id":"thresholds","value":{"mode":"absolute","steps":[{"color":"rgba(245, 54, 54, 0.9)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":0},{"color":"rgba(50, 172, 45, 0.97)","value":0},{"value":null}]}}]}]},"gridPos":{"h":9,"w":9,"x":15,"y":14},"id":59,"links":[],"options":{"showHeader":true,"sortBy":[]},"pluginVersion":"8.0.5","targets":[{"exemplar":true,"expr":"kube_node_info{namespace=~\"$namespace\",job=\"kubernetes-service-endpoints\"}","format":"table","instant":true,"interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Nodes","transformations":[{"id":"merge","options":{"reducers":[]}},{"id":"organize","options":{"excludeByName":{"Time":true,"Value":true,"__name__":true,"container_runtime_version":true,"instance":true,"job":true,"kernel_version":true,"kubelet_version":false,"kubeproxy_version":true,"namespace":false,"pod_cidr":true},"indexByName":{"Time":5,"Value":9,"__name__":6,"container_runtime_version":10,"instance":7,"internal_ip":2,"job":8,"kernel_version":11,"kubelet_version":3,"kubeproxy_version":12,"node":0,"os_image":1,"pod_cidr":4},"renameByName":{"Time":"","internal_ip":"Internal IP","ip":"IP","kubelet_version":"Kubelet Version","namespace":"Name","node":"Name","os_image":"OS Image","pod_cidr":"","service":"Service Name"}}}],"type":"table"},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":23},"id":2,"panels":[],"title":"Cluster Health","type":"row"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":80},{"color":"#d44a3a","value":90}]},"unit":"percentunit"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":0,"y":24},"id":4,"interval":null,"links":[],"maxDataPoints":100,"options":{"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true,"text":{}},"pluginVersion":"8.0.5","targets":[{"exemplar":true,"expr":"sum(kube_pod_info{node=~\"$node\"}) / sum(kube_node_status_allocatable{node=~\".*\",resource=\"pods\",job=\"kubernetes-service-endpoints\"})","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Cluster Pod Usage","type":"gauge"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":80},{"color":"#d44a3a","value":90}]},"unit":"percentunit"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":6,"y":24},"id":5,"interval":null,"links":[],"maxDataPoints":100,"options":{"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true,"text":{}},"pluginVersion":"8.0.5","targets":[{"exemplar":true,"expr":"sum(kube_pod_container_resource_requests{node=~\"$node\",resource=\"cpu\",unit=\"core\"}) / sum(kube_node_status_allocatable{node=~\"$node\",resource=\"cpu\", unit=\"core\"})","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Cluster CPU Usage","type":"gauge"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":80},{"color":"#d44a3a","value":90}]},"unit":"percentunit"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":12,"y":24},"id":6,"interval":null,"links":[],"maxDataPoints":100,"options":{"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true,"text":{}},"pluginVersion":"8.0.5","targets":[{"exemplar":true,"expr":"sum(kube_pod_container_resource_requests{node=~\"$node\",resource=\"memory\",unit=\"byte\"}) / sum(kube_node_status_allocatable{node=~\"$node\",resource=\"memory\", unit=\"byte\"})","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Cluster Memory Usage","type":"gauge"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fill":1,"fillGradient":0,"gridPos":{"h":5,"w":6,"x":18,"y":24},"hiddenSeries":false,"id":11,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"exemplar":true,"expr":"sum(kube_node_status_allocatable{node=~\"$node\", resource=\"memory\", unit=\"byte\"})","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"allocatable","refId":"A"},{"exemplar":true,"expr":"sum(kube_node_status_capacity{node=~\"$node\", resource=\"memory\", unit=\"byte\"})","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"capacity","refId":"B"},{"exemplar":true,"expr":"sum(kube_pod_container_resource_requests{node=~\"$node\",resource=\"memory\", unit=\"byte\"})","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"requested","refId":"C"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Cluster Mem Capacity","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"decbytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fill":1,"fillGradient":0,"gridPos":{"h":5,"w":6,"x":0,"y":28},"hiddenSeries":false,"id":9,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"exemplar":true,"expr":"sum(kube_node_status_allocatable_pods{node=~\"$node\",job=\"kubernetes-service-endpoints\"})","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"allocatable","refId":"A"},{"exemplar":true,"expr":"sum(kube_node_status_capacity_pods{node=~\"$node\",job=\"kubernetes-service-endpoints\"})","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"capacity","refId":"B"},{"exemplar":true,"expr":"sum(kube_pod_info{node=~\"$node\",job=\"kubernetes-service-endpoints\"})","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"requested","refId":"C"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Cluster Pod Capacity","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"pods","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"alert":{"alertRuleTags":{},"conditions":[{"evaluator":{"params":[100],"type":"gt"},"operator":{"type":"and"},"query":{"params":["A","5m","now-1m"]},"reducer":{"params":[],"type":"avg"},"type":"query"}],"executionErrorState":"alerting","for":"10s","frequency":"30s","handler":1,"name":"Cluster CPU Capacity - k8s-7s4zm83cl-7s4zm83 alert","noDataState":"no_data","notifications":[]},"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fill":1,"fillGradient":0,"gridPos":{"h":5,"w":6,"x":6,"y":28},"hiddenSeries":false,"id":10,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"exemplar":true,"expr":"sum(kube_node_status_capacity{node=\"k8s-7s4zm83cl-7s4zm83\",resource=\"cpu\", unit=\"core\"})","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"allocatable","refId":"A"},{"exemplar":true,"expr":"sum(kube_node_status_allocatable{node=\"k8s-7s4zm83cl-7s4zm83\",resource=\"cpu\", unit=\"core\"})","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"capacity","refId":"B"},{"exemplar":true,"expr":"sum(kube_pod_container_resource_requests{node=\"k8s-7s4zm83cl-7s4zm83\",resource=\"cpu\",  unit=\"core\"})","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"requested","refId":"C"}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":100,"visible":true}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Cluster CPU Capacity - k8s-7s4zm83cl-7s4zm83","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"none","label":"cores","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fill":1,"fillGradient":0,"gridPos":{"h":5,"w":6,"x":12,"y":28},"hiddenSeries":false,"id":62,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"exemplar":true,"expr":"sum(kube_node_status_allocatable_pods{node=~\"$node\",job=\"kubernetes-service-endpoints\"})","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"allocatable","refId":"A"},{"exemplar":true,"expr":"sum(kube_node_status_capacity_pods{node=~\"$node\",job=\"kubernetes-service-endpoints\"})","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"capacity","refId":"B"},{"exemplar":true,"expr":"sum(kube_pod_info{node=~\"$node\",job=\"kubernetes-service-endpoints\"})","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"requested","refId":"C"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Cluster Pod Capacity","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"pods","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":33},"id":36,"panels":[],"title":"Containers","type":"row"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"fixedColor":"rgb(31, 120, 193)","mode":"fixed"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":0,"y":34},"id":38,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.0.5","targets":[{"expr":"sum(kube_pod_container_status_running{namespace=~\"$namespace\"})","format":"time_series","intervalFactor":1,"refId":"A"}],"title":"Containers Running","type":"stat"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"fixedColor":"rgb(31, 120, 193)","mode":"fixed"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":6,"y":34},"id":39,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.0.5","targets":[{"expr":"sum(kube_pod_container_status_waiting{namespace=~\"$namespace\"})","format":"time_series","intervalFactor":1,"refId":"A"}],"title":"Containers Waiting","type":"stat"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"fixedColor":"rgb(31, 120, 193)","mode":"fixed"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":12,"y":34},"id":40,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.0.5","targets":[{"exemplar":true,"expr":"sum(kube_pod_container_status_terminated{namespace=~\"$namespace\", job=\"kubernetes-service-endpoints\"})","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Containers Terminated","type":"stat"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"fixedColor":"rgb(31, 120, 193)","mode":"fixed"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":2,"x":18,"y":34},"id":41,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.0.5","targets":[{"exemplar":true,"expr":"sum(kube_pod_container_status_restarts_total{namespace=~\"$namespace\", job=\"kubernetes-service-endpoints\"})","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Containers Restarts","type":"stat"},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":37},"id":45,"panels":[],"title":"Jobs","type":"row"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"fixedColor":"rgb(31, 120, 193)","mode":"fixed"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":8,"x":0,"y":38},"id":47,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.0.5","targets":[{"exemplar":true,"expr":"sum(kube_job_status_succeeded{namespace=~\"$namespace\",job=\"kubernetes-service-endpoints\"})","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Jobs Succeeded","type":"stat"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"fixedColor":"rgb(31, 120, 193)","mode":"fixed"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":8,"x":8,"y":38},"id":48,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.0.5","targets":[{"exemplar":true,"expr":"sum(kube_job_status_active{namespace=~\"$namespace\", job=\"kubernetes-service-endpoints\"})","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Jobs Succeeded","type":"stat"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"fixedColor":"rgb(31, 120, 193)","mode":"fixed"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":3,"x":16,"y":38},"id":49,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.0.5","targets":[{"exemplar":true,"expr":"sum(kube_job_status_failed{namespace=~\"$namespace\",job=\"kubernetes-service-endpoints\"})","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Jobs Failed","type":"stat"}],"refresh":"","schemaVersion":30,"style":"dark","tags":["kubernetes","kubernetes-app"],"templating":{"list":[{"current":{"selected":false,"text":"No data sources found","value":""},"description":null,"error":null,"hide":2,"includeAll":false,"label":"","multi":false,"name":"datasource","options":[],"query":"prometheus","refresh":1,"regex":"/$ds/","skipUrlSync":false,"type":"datasource"},{"current":{"selected":true,"text":".*","value":".*"},"description":null,"error":null,"hide":0,"label":null,"name":"node","options":[{"selected":true,"text":".*","value":".*"}],"query":".*","skipUrlSync":false,"type":"textbox"},{"current":{"selected":false,"text":".*","value":".*"},"description":null,"error":null,"hide":0,"label":null,"name":"namespace","options":[{"selected":true,"text":".*","value":".*"}],"query":".*","skipUrlSync":false,"type":"textbox"}]},"time":{"from":"now-30m","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"browser","title":"Kubernetes Overview","uid":"BtC4h5vnk","version":2}
          datasource: Prometheus
        prometheus-status:
          json: |
            {"annotations":{"list":[{"datasource":"Prometheus","enable":true,"expr":"sum(changes(prometheus_config_last_reload_success_timestamp_seconds{instance=~\"$instance\"}[10m])) by (instance)","hide":false,"iconColor":"rgb(0, 96, 19)","limit":100,"name":"reloads","showIn":0,"step":"5m","type":"alert"},{"datasource":"Prometheus","enable":true,"expr":"count(sum(up{instance=\"$instance\"}) by (instance) < 1)","hide":false,"iconColor":"rgba(255, 96, 96, 1)","limit":100,"name":"down","showIn":0,"step":"5m","type":"alert"}]},"description":"Get started faster with Grafana Cloud then easily build these dashboards. https://grafana.com/products/cloud/\nOverview of metrics from Prometheus 2.0.  \nUseful for using prometheus to monitor your prometheus.\nRevisions welcome!","editable":true,"gnetId":3662,"graphTooltip":0,"hideControls":false,"id":null,"links":[],"refresh":"30s","rows":[{"collapse":false,"height":250,"panels":[{"cacheTimeout":null,"colorBackground":false,"colorValue":true,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":"Prometheus","decimals":3,"description":"Percentage of uptime during the most recent $interval period.  Change the period with the 'interval' dropdown above.","format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":false},"id":2,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"%","postfixFontSize":"100%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":3,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":true,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"avg(avg_over_time(up{instance=~\"$instance\",job=~\"$job\"}[$interval]) * 100)","format":"time_series","intervalFactor":2,"legendFormat":"","refId":"A","step":40}],"thresholds":"90, 99","title":"Uptime [$interval]","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"columns":[],"datasource":"Prometheus","description":"Servers which are DOWN RIGHT NOW! \nFIX THEM!!","fontSize":"100%","hideTimeOverride":true,"id":25,"links":[],"pageSize":null,"scroll":true,"showHeader":true,"sort":{"col":0,"desc":true},"span":3,"styles":[{"alias":"Time","dateFormat":"YYYY-MM-DD HH:mm:ss","pattern":"Time","type":"hidden"},{"alias":"","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"pattern":"/__name__|job|Value/","thresholds":[],"type":"hidden","unit":"short"},{"alias":"   ","colorMode":"cell","colors":["rgba(255, 0, 0, 0.9)","rgba(237, 129, 40, 0.89)","rgba(255, 0, 0, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"pattern":"instance","thresholds":["","",""],"type":"string","unit":"short"}],"targets":[{"expr":"up{instance=~\"$instance\",job=~\"$job\"} < 1","format":"table","intervalFactor":2,"refId":"A","step":2}],"timeFrom":"1s","title":"Currently Down","transform":"table","type":"table"},{"cacheTimeout":null,"colorBackground":false,"colorValue":true,"colors":["rgba(50, 172, 45, 0.97)","rgba(237, 129, 40, 0.89)","rgba(245, 54, 54, 0.9)"],"datasource":"Prometheus","description":"Total number of time series in prometheus","format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":12,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":3,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":true,"lineColor":"rgb(31, 120, 193)","show":true},"tableColumn":"","targets":[{"expr":"sum(prometheus_tsdb_head_series{job=~\"$job\",instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"refId":"B","step":40}],"thresholds":"1000000,2000000","title":"Total Series","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":"Prometheus","format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":14,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":3,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":true,"lineColor":"rgb(31, 120, 193)","show":true},"tableColumn":"","targets":[{"expr":"sum(prometheus_tsdb_head_chunks{job=~\"$job\",instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"refId":"B","step":40}],"thresholds":"","title":"Memory Chunks","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"at a glance","titleSize":"h6"},{"collapse":false,"height":236,"panels":[{"cacheTimeout":null,"colorBackground":false,"colorValue":true,"colors":["rgba(50, 172, 45, 0.97)","rgba(237, 129, 40, 0.89)","rgba(245, 54, 54, 0.9)"],"datasource":"Prometheus","description":"The total number of rule group evaluations missed due to slow rule group evaluation.","format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":16,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":2,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"sum(sum_over_time(prometheus_evaluator_iterations_missed_total{job=~\"$job\",instance=~\"$instance\"}[$interval]))","format":"time_series","intervalFactor":2,"refId":"A","step":40}],"thresholds":"1,10","title":"Missed Iterations [$interval]","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":true,"colors":["rgba(50, 172, 45, 0.97)","rgba(237, 129, 40, 0.89)","rgba(245, 54, 54, 0.9)"],"datasource":"Prometheus","description":"The total number of rule group evaluations skipped due to throttled metric storage.","format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":18,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":2,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"sum(sum_over_time(prometheus_evaluator_iterations_skipped_total{job=~\"$job\",instance=~\"$instance\"}[$interval]))","format":"time_series","intervalFactor":2,"refId":"A","step":40}],"thresholds":"1,10","title":"Skipped Iterations [$interval]","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":true,"colors":["rgba(50, 172, 45, 0.97)","rgba(237, 129, 40, 0.89)","rgba(245, 54, 54, 0.9)"],"datasource":"Prometheus","description":"Total number of scrapes that hit the sample limit and were rejected.","format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":19,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":2,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"sum(sum_over_time(prometheus_target_scrapes_exceeded_sample_limit_total{job=~\"$job\",instance=~\"$instance\"}[$interval]))","format":"time_series","intervalFactor":2,"refId":"A","step":40}],"thresholds":"1,10","title":"Tardy Scrapes [$interval]","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":true,"colors":["rgba(50, 172, 45, 0.97)","rgba(237, 129, 40, 0.89)","rgba(245, 54, 54, 0.9)"],"datasource":"Prometheus","description":"Number of times the database failed to reload block data from disk.","format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":13,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":2,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"sum(sum_over_time(prometheus_tsdb_reloads_failures_total{job=~\"$job\",instance=~\"$instance\"}[$interval]))","format":"time_series","intervalFactor":2,"refId":"A","step":40}],"thresholds":"1,10","title":"Reload Failures [$interval]","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":true,"colors":["rgba(50, 172, 45, 0.97)","rgba(237, 129, 40, 0.89)","rgba(245, 54, 54, 0.9)"],"datasource":"Prometheus","description":"Sum of all skipped scrapes","format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":20,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":4,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"sum(sum_over_time(prometheus_target_scrapes_exceeded_sample_limit_total{job=~\"$job\",instance=~\"$instance\"}[$interval])) + \nsum(sum_over_time(prometheus_target_scrapes_sample_duplicate_timestamp_total{job=~\"$job\",instance=~\"$instance\"}[$interval])) + \nsum(sum_over_time(prometheus_target_scrapes_sample_out_of_bounds_total{job=~\"$job\",instance=~\"$instance\"}[$interval])) + \nsum(sum_over_time(prometheus_target_scrapes_sample_out_of_order_total{job=~\"$job\",instance=~\"$instance\"}[$interval])) ","format":"time_series","intervalFactor":2,"refId":"A","step":40}],"thresholds":"1,10","title":"Skipped Scrapes [$interval]","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"quick numbers","titleSize":"h6"},{"collapse":false,"height":250,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"All non-zero failures and errors","fill":1,"id":33,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":12,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(increase(net_conntrack_dialer_conn_failed_total{instance=~\"$instance\"}[5m])) > 0","format":"time_series","intervalFactor":2,"legendFormat":"Failed Connections","refId":"A","step":2},{"expr":"sum(increase(prometheus_evaluator_iterations_missed_total{instance=~\"$instance\"}[5m])) > 0","format":"time_series","intervalFactor":2,"legendFormat":"Missed Iterations","refId":"B","step":2},{"expr":"sum(increase(prometheus_evaluator_iterations_skipped_total{instance=~\"$instance\"}[5m])) > 0","format":"time_series","intervalFactor":2,"legendFormat":"Skipped Iterations","refId":"C","step":2},{"expr":"sum(increase(prometheus_rule_evaluation_failures_total{instance=~\"$instance\"}[5m])) > 0","format":"time_series","intervalFactor":2,"legendFormat":"Evaluation","refId":"D","step":2},{"expr":"sum(increase(prometheus_sd_azure_refresh_failures_total{instance=~\"$instance\"}[5m])) > 0","format":"time_series","intervalFactor":2,"legendFormat":"Azure Refresh","refId":"E","step":2},{"expr":"sum(increase(prometheus_sd_consul_rpc_failures_total{instance=~\"$instance\"}[5m])) > 0","format":"time_series","intervalFactor":2,"legendFormat":"Consul RPC","refId":"F","step":2},{"expr":"sum(increase(prometheus_sd_dns_lookup_failures_total{instance=~\"$instance\"}[5m])) > 0","format":"time_series","intervalFactor":2,"legendFormat":"DNS Lookup","refId":"G","step":2},{"expr":"sum(increase(prometheus_sd_ec2_refresh_failures_total{instance=~\"$instance\"}[5m])) > 0","format":"time_series","intervalFactor":2,"legendFormat":"EC2 Refresh","refId":"H","step":2},{"expr":"sum(increase(prometheus_sd_gce_refresh_failures_total{instance=~\"$instance\"}[5m])) > 0","format":"time_series","intervalFactor":2,"legendFormat":"GCE Refresh","refId":"I","step":2},{"expr":"sum(increase(prometheus_sd_marathon_refresh_failures_total{instance=~\"$instance\"}[5m])) > 0","format":"time_series","intervalFactor":2,"legendFormat":"Marathon Refresh","refId":"J","step":2},{"expr":"sum(increase(prometheus_sd_openstack_refresh_failures_total{instance=~\"$instance\"}[5m])) > 0","format":"time_series","intervalFactor":2,"legendFormat":"Openstack Refresh","refId":"K","step":2},{"expr":"sum(increase(prometheus_sd_triton_refresh_failures_total{instance=~\"$instance\"}[5m])) > 0","format":"time_series","intervalFactor":2,"legendFormat":"Triton Refresh","refId":"L","step":2},{"expr":"sum(increase(prometheus_target_scrapes_exceeded_sample_limit_total{instance=~\"$instance\"}[5m])) > 0","format":"time_series","intervalFactor":2,"legendFormat":"Sample Limit","refId":"M","step":2},{"expr":"sum(increase(prometheus_target_scrapes_sample_duplicate_timestamp_total{instance=~\"$instance\"}[5m])) > 0","format":"time_series","intervalFactor":2,"legendFormat":"Duplicate Timestamp","refId":"N","step":2},{"expr":"sum(increase(prometheus_target_scrapes_sample_out_of_bounds_total{instance=~\"$instance\"}[5m])) > 0","format":"time_series","intervalFactor":2,"legendFormat":"Timestamp Out of Bounds","refId":"O","step":2},{"expr":"sum(increase(prometheus_target_scrapes_sample_out_of_order_total{instance=~\"$instance\"}[5m])) > 0","format":"time_series","intervalFactor":2,"legendFormat":"Sample Out of Order","refId":"P","step":2},{"expr":"sum(increase(prometheus_treecache_zookeeper_failures_total{instance=~\"$instance\"}[5m])) > 0","format":"time_series","intervalFactor":2,"legendFormat":"Zookeeper","refId":"Q","step":2},{"expr":"sum(increase(prometheus_tsdb_compactions_failed_total{instance=~\"$instance\"}[5m])) > 0","format":"time_series","intervalFactor":2,"legendFormat":"TSDB Compactions","refId":"R","step":2},{"expr":"sum(increase(prometheus_tsdb_head_series_not_found{instance=~\"$instance\"}[5m])) > 0","format":"time_series","intervalFactor":2,"legendFormat":"Series Not Found","refId":"S","step":2},{"expr":"sum(increase(prometheus_tsdb_reloads_failures_total{instance=~\"$instance\"}[5m])) > 0","format":"time_series","intervalFactor":2,"legendFormat":"Reload","refId":"T","step":2}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Failures and Errors","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"Errors","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"errors","titleSize":"h6"},{"collapse":false,"height":"250px","panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fill":1,"id":1,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":6,"stack":true,"steppedLine":false,"targets":[{"expr":"up{instance=~\"$instance\",job=~\"$job\"}","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{instance}}","refId":"A","step":2}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Upness (stacked)","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"none","label":"Up","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fill":1,"id":5,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"prometheus_tsdb_head_chunks{job=~\"$job\",instance=~\"$instance\"}","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"A","step":4}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Storage Memory Chunks","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"Chunks","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"up","titleSize":"h6"},{"collapse":false,"height":250,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fill":1,"id":3,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"prometheus_tsdb_head_series{job=~\"$job\",instance=~\"$instance\"}","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"A","step":4}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Series Count","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"Series","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fill":1,"id":32,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"removed","transform":"negative-Y"}],"spaceLength":10,"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"sum( increase(prometheus_tsdb_head_series_created_total{instance=~\"$instance\"}[5m]) )","format":"time_series","intervalFactor":2,"legendFormat":"created","refId":"A","step":4},{"expr":"sum( increase(prometheus_tsdb_head_series_removed_total{instance=~\"$instance\"}[5m]) )","format":"time_series","intervalFactor":2,"legendFormat":"removed","refId":"B","step":4}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Series Created / Removed","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"Series Count","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"series","titleSize":"h6"},{"collapse":false,"height":250,"panels":[{"aliasColors":{"10.58.3.10:80":"#BA43A9"},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"Rate of total number of appended samples","fill":1,"id":4,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":12,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(prometheus_tsdb_head_samples_appended_total{job=~\"$job\",instance=~\"$instance\"}[1m])","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"A","step":2}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Appended Samples per Second","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"Samples / Second","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"appended samples","titleSize":"h6"},{"collapse":false,"height":250,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"Total number of syncs that were executed on a scrape pool.","fill":1,"id":6,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(prometheus_target_scrape_pool_sync_total{job=~\"$job\",instance=~\"$instance\"}) by (scrape_job)","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"{{scrape_job}}","refId":"B","step":4}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Scrape Sync Total","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"Syncs","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"Actual interval to sync the scrape pool.","fill":1,"id":21,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(prometheus_target_sync_length_seconds_sum{job=~\"$job\",instance=~\"$instance\"}[2m])) by (scrape_job) * 1000","format":"time_series","intervalFactor":2,"legendFormat":"{{scrape_job}}","refId":"A","step":4}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Target Sync","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"Milliseconds","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"sync","titleSize":"h6"},{"collapse":false,"height":250,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fill":1,"id":29,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"scrape_duration_seconds{instance=~\"$instance\"}","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"A","step":4}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Scrape Duration","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"Seconds","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"Total number of rejected scrapes","fill":1,"id":30,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(prometheus_target_scrapes_exceeded_sample_limit_total{job=~\"$job\",instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"exceeded sample limit","refId":"A","step":4},{"expr":"sum(prometheus_target_scrapes_sample_duplicate_timestamp_total{job=~\"$job\",instance=~\"$instance\"})","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"duplicate timestamp","refId":"B","step":4},{"expr":"sum(prometheus_target_scrapes_sample_out_of_bounds_total{job=~\"$job\",instance=~\"$instance\"})","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"out of bounds","refId":"C","step":4},{"expr":"sum(prometheus_target_scrapes_sample_out_of_order_total{job=~\"$job\",instance=~\"$instance\"}) ","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"out of order","refId":"D","step":4}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Rejected Scrapes","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"Scrapes","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"scrapes","titleSize":"h6"},{"collapse":false,"height":250,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"The duration of rule group evaluations","fill":1,"id":10,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"1000 * rate(prometheus_evaluator_duration_seconds_sum{job=~\"$job\", instance=~\"$instance\"}[5m]) / rate(prometheus_evaluator_duration_seconds_count{job=~\"$job\", instance=~\"$instance\"}[5m])","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"E","step":4}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Average Rule Evaluation Duration","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"Milliseconds","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fill":1,"id":11,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(http_request_duration_microseconds_count{job=~\"$job\",instance=~\"$instance\"}[1m])) by (handler) > 0","format":"time_series","intervalFactor":2,"legendFormat":"{{handler}}","refId":"A","step":4}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"HTTP Request Duration","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"Microseconds","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fill":1,"id":15,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(prometheus_engine_query_duration_seconds_sum{job=~\"$job\",instance=~\"$instance\"}) by (slice)","format":"time_series","intervalFactor":2,"legendFormat":"{{slice}}","refId":"A","step":4}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Prometheus Engine Query Duration Seconds","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"Seconds","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"Rule-group evaluations \n - total\n - missed due to slow rule group evaluation\n - skipped due to throttled metric storage","fill":1,"id":31,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(prometheus_evaluator_iterations_total{job=~\"$job\", instance=~\"$instance\"}[5m]))","format":"time_series","intervalFactor":2,"legendFormat":"Total","refId":"B","step":4},{"expr":"sum(rate(prometheus_evaluator_iterations_missed_total{job=~\"$job\", instance=~\"$instance\"}[5m]))","format":"time_series","intervalFactor":2,"legendFormat":"Missed","refId":"A","step":4},{"expr":"sum(rate(prometheus_evaluator_iterations_skipped_total{job=~\"$job\", instance=~\"$instance\"}[5m]))","format":"time_series","intervalFactor":2,"legendFormat":"Skipped","refId":"C","step":4}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Rule Evaluator Iterations","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"iterations","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"durations","titleSize":"h6"},{"collapse":false,"height":250,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fill":1,"id":22,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":12,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(prometheus_notifications_sent_total[5m])","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"A","step":2}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Notifications Sent","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"Notifications","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"notifications","titleSize":"h6"},{"collapse":false,"height":250,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fill":1,"id":23,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"(time() - prometheus_config_last_reload_success_timestamp_seconds{job=~\"$job\",instance=~\"$instance\"}) / 60","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"A","step":4}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Minutes Since Successful Config Reload","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"Minutes","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fill":1,"id":24,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"prometheus_config_last_reload_successful{job=~\"$job\",instance=~\"$instance\"}","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"A","step":4}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Successful Config Reload","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"Success","logBase":1,"max":"1","min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"config","titleSize":"h6"},{"collapse":false,"height":250,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"GC invocation durations","fill":1,"id":28,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":12,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(go_gc_duration_seconds_sum{instance=~\"$instance\",job=~\"$job\"}[2m])) by (instance)","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"A","step":2}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"GC Rate / 2m","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"garbage collection","titleSize":"h6"},{"collapse":true,"height":250,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"This is probably wrong!  Please help.","fill":1,"id":26,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"allocated","stack":false}],"spaceLength":10,"span":6,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(go_memstats_alloc_bytes_total{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","hide":true,"intervalFactor":2,"legendFormat":"alloc_bytes_total","refId":"A","step":10},{"expr":"sum(go_memstats_alloc_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"allocated","refId":"B","step":10},{"expr":"sum(go_memstats_buck_hash_sys_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"profiling bucket hash table","refId":"C","step":10},{"expr":"sum(go_memstats_gc_sys_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"GC metadata","refId":"D","step":10},{"expr":"sum(go_memstats_heap_alloc_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"heap in-use","refId":"E","step":10},{"expr":"sum(go_memstats_heap_idle_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"heap idle","refId":"F","step":10},{"expr":"sum(go_memstats_heap_inuse_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"heap in use","refId":"G","step":10},{"expr":"sum(go_memstats_heap_released_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"heap released","refId":"H","step":10},{"expr":"sum(go_memstats_heap_sys_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"heap system","refId":"I","step":10},{"expr":"sum(go_memstats_mcache_inuse_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"mcache in use","refId":"J","step":10},{"expr":"sum(go_memstats_mcache_sys_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"mcache sys","refId":"K","step":10},{"expr":"sum(go_memstats_mspan_inuse_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"mspan in use","refId":"L","step":10},{"expr":"sum(go_memstats_mspan_sys_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"mspan sys","refId":"M","step":10},{"expr":"sum(go_memstats_next_gc_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"heap next gc","refId":"N","step":10},{"expr":"sum(go_memstats_other_sys_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"other sys","refId":"O","step":10},{"expr":"sum(go_memstats_stack_inuse_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"stack in use","refId":"P","step":10},{"expr":"sum(go_memstats_stack_sys_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"stack sys","refId":"Q","step":10},{"expr":"sum(go_memstats_sys_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"sys","refId":"R","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Go Memory Usage (FIXME)","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fill":1,"id":9,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":3,"stack":false,"steppedLine":false,"targets":[{"expr":"prometheus_target_interval_length_seconds{instance=~\"$instance\", job=~\"$job\"}","format":"time_series","intervalFactor":2,"legendFormat":"{{quantile}} {{interval}}","refId":"A","step":20}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Scrape Duration","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"Seconds","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fill":1,"id":7,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":3,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(prometheus_target_interval_length_seconds_count{job=~\"$job\",instance=~\"$instance\"}[5m])) by (interval)","format":"time_series","intervalFactor":2,"legendFormat":"{{interval}}","refId":"A","step":20}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Target Scrapes / 5m","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"Scrapes","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Broken, ignore","titleSize":"h6"}],"schemaVersion":14,"style":"dark","tags":["kubernetes","prometheus"],"templating":{"list":[{"allValue":null,"current":{},"datasource":"Prometheus","hide":0,"includeAll":true,"label":null,"multi":true,"name":"job","options":[],"query":"query_result(prometheus_tsdb_head_samples_appended_total)","refresh":2,"regex":"/.*job=\"([^\"]+)/","sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{},"datasource":"Prometheus","hide":0,"includeAll":true,"label":null,"multi":true,"name":"instance","options":[],"query":"query_result(up{job=~\"$job\"})","refresh":2,"regex":"/.*instance=\"([^\"]+).*/","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":true,"text":"1h","value":"1h"},"hide":0,"includeAll":false,"label":null,"multi":false,"name":"interval","options":[{"selected":true,"text":"1h","value":"1h"},{"selected":false,"text":"3h","value":"3h"},{"selected":false,"text":"6h","value":"6h"},{"selected":false,"text":"12h","value":"12h"},{"selected":false,"text":"1d","value":"1d"},{"selected":false,"text":"2d","value":"2d"},{"selected":false,"text":"7d","value":"7d"},{"selected":false,"text":"30d","value":"30d"},{"selected":false,"text":"90d","value":"90d"},{"selected":false,"text":"180d","value":"180d"}],"query":"1h, 3h, 6h, 12h, 1d, 2d, 7d, 30d, 90d, 180d","type":"custom"}]},"time":{"from":"now-30m","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"Prometheus Overview","version":21}
          datasource: Prometheus
        rabbitmq-status:
          json: |
            {"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"description":"A new RabbitMQ Management Overview","editable":true,"gnetId":10991,"graphTooltip":1,"iteration":1610979946179,"links":[{"icon":"doc","tags":[],"targetBlank":true,"title":"Monitoring with Prometheus & Grafana","tooltip":"","type":"link","url":"https://www.rabbitmq.com/prometheus.html"}],"panels":[{"cacheTimeout":null,"colorBackground":true,"colorPrefix":false,"colorValue":false,"colors":["#37872D","#1F60C4","#C4162A"],"datasource":"Prometheus","description":"","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"format":"short","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":64,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"pluginVersion":"6.1.3","postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(255, 255, 255, 0)","full":false,"lineColor":"rgb(255, 255, 255)","show":true},"tableColumn":"","targets":[{"expr":"sum(rabbitmq_queue_messages_ready * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"})","format":"time_series","hide":false,"instant":false,"interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"thresholds":"10000,100000","timeFrom":null,"timeShift":null,"title":"Ready messages","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":true,"colorValue":false,"colors":["#C4162A","#1F60C4","#37872D"],"datasource":"Prometheus","decimals":null,"description":"","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"format":"short","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":6,"x":6,"y":0},"id":62,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"pluginVersion":"6.1.3","postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(255, 255, 255, 0)","full":false,"lineColor":"rgb(255, 255, 255)","show":true},"tableColumn":"","targets":[{"expr":"sum(rate(rabbitmq_channel_messages_published_total[60s]) * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"})","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"thresholds":"-1,50","timeFrom":null,"timeShift":null,"title":"Incoming messages / s","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":true,"colorValue":false,"colors":["#C4162A","#1F60C4","#37872D"],"datasource":"Prometheus","description":"","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":4,"x":12,"y":0},"id":66,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"pluginVersion":"6.1.3","postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(255, 255, 255, 0)","full":false,"lineColor":"rgb(255, 255, 255)","show":true},"tableColumn":"","targets":[{"expr":"sum(rabbitmq_channels * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) - sum(rabbitmq_channel_consumers * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"})","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"","refId":"A"}],"thresholds":"0,10","timeFrom":null,"timeShift":null,"title":"Publishers","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":true,"colorValue":false,"colors":["#C4162A","#1F60C4","#37872D"],"datasource":"Prometheus","description":"","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":4,"x":16,"y":0},"id":37,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"pluginVersion":"6.1.3","postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(255, 255, 255, 0)","full":false,"lineColor":"rgb(255, 255, 255)","show":true},"tableColumn":"","targets":[{"expr":"sum(rabbitmq_connections * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"})","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"thresholds":"0,10","timeFrom":null,"timeShift":null,"title":"Connections","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":true,"colorValue":false,"colors":["#C4162A","#1F60C4","#37872D"],"datasource":"Prometheus","description":"","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":4,"x":20,"y":0},"id":40,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"pluginVersion":"6.1.3","postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(255, 255, 255, 0)","full":false,"lineColor":"rgb(255, 255, 255)","show":true},"tableColumn":"","targets":[{"expr":"sum(rabbitmq_queues * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"})","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"","refId":"A"}],"thresholds":"0,10","timeFrom":null,"timeShift":null,"title":"Queues","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":true,"colorValue":false,"colors":["#37872D","#1F60C4","#C4162A"],"datasource":"Prometheus","description":"","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"format":"short","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":6,"x":0,"y":3},"id":65,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"pluginVersion":"6.1.3","postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(255, 255, 255, 0)","full":false,"lineColor":"rgb(255, 255, 255)","show":true},"tableColumn":"","targets":[{"expr":"sum(rabbitmq_queue_messages_unacked * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"})","format":"time_series","hide":false,"instant":false,"intervalFactor":1,"legendFormat":"","refId":"A"}],"thresholds":"100,500","timeFrom":null,"timeShift":null,"title":"Unacknowledged messages","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":true,"colorValue":false,"colors":["#C4162A","#1F60C4","#37872D"],"datasource":"Prometheus","description":"","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"format":"short","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":6,"x":6,"y":3},"id":63,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"pluginVersion":"6.1.3","postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(255, 255, 255, 0)","full":false,"lineColor":"rgb(255, 255, 255)","show":true},"tableColumn":"","targets":[{"expr":"sum(rate(rabbitmq_channel_messages_redelivered_total[60s]) * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) +\nsum(rate(rabbitmq_channel_messages_delivered_total[60s]) * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) +\nsum(rate(rabbitmq_channel_messages_delivered_ack_total[60s]) * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) +\nsum(rate(rabbitmq_channel_get_total[60s]) * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) +\nsum(rate(rabbitmq_channel_get_ack_total[60s]) * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"})","format":"time_series","hide":false,"instant":false,"intervalFactor":1,"legendFormat":"","refId":"A"}],"thresholds":"-1,50","timeFrom":null,"timeShift":null,"title":"Outgoing messages / s","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":true,"colorValue":false,"colors":["#C4162A","#1F60C4","#37872D"],"datasource":"Prometheus","description":"","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":4,"x":12,"y":3},"id":41,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"pluginVersion":"6.1.3","postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(255, 255, 255, 0)","full":false,"lineColor":"rgb(255, 255, 255)","show":true},"tableColumn":"","targets":[{"expr":"sum(rabbitmq_channel_consumers * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"})","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"","refId":"A"}],"thresholds":"0,10","timeFrom":null,"timeShift":null,"title":"Consumers","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":true,"colorValue":false,"colors":["#C4162A","#1F60C4","#37872D"],"datasource":"Prometheus","description":"","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":4,"x":16,"y":3},"id":38,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"pluginVersion":"6.1.3","postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(255, 255, 255, 0)","full":false,"lineColor":"rgb(255, 255, 255)","show":true},"tableColumn":"","targets":[{"expr":"sum(rabbitmq_channels * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"})","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"","refId":"A"}],"thresholds":"0,10","timeFrom":null,"timeShift":null,"title":"Channels","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":true,"colorValue":false,"colors":["#1F60C4","#37872D","#C4162A"],"datasource":"Prometheus","description":"","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":4,"x":20,"y":3},"id":67,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"pluginVersion":"6.1.3","postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(255, 255, 255, 0)","full":false,"lineColor":"rgb(255, 255, 255)","show":true},"tableColumn":"","targets":[{"expr":"sum(rabbitmq_build_info * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"})","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"","refId":"A"}],"thresholds":"3,8","timeFrom":null,"timeShift":null,"title":"Nodes","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"collapsed":false,"datasource":"Prometheus","gridPos":{"h":1,"w":24,"x":0,"y":6},"id":4,"panels":[],"title":"NODES","type":"row"},{"columns":[],"datasource":"Prometheus","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fontSize":"100%","gridPos":{"h":4,"w":24,"x":0,"y":7},"id":69,"links":[],"pageSize":null,"scroll":true,"showHeader":true,"sort":{"col":8,"desc":false},"styles":[{"alias":"Erlang/OTP","align":"auto","colorMode":null,"colors":["rgba(50, 172, 45, 0.97)","rgba(237, 129, 40, 0.89)","rgba(245, 54, 54, 0.9)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":null,"link":false,"mappingType":1,"pattern":"erlang_version","thresholds":[""],"type":"string","unit":"none"},{"alias":"RabbitMQ","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"mappingType":1,"pattern":"rabbitmq_version","thresholds":[""],"type":"string","unit":"none"},{"alias":"Host","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"mappingType":1,"pattern":"instance","preserveFormat":false,"thresholds":[],"type":"string","unit":"short","valueMaps":[]},{"alias":"Node name","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"mappingType":1,"pattern":"rabbitmq_node","thresholds":[""],"type":"string","unit":"short"},{"alias":"","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"mappingType":1,"pattern":"Time","thresholds":[],"type":"hidden","unit":"short"},{"alias":"","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"mappingType":1,"pattern":"Value","thresholds":[],"type":"hidden","unit":"short"},{"alias":"","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"mappingType":1,"pattern":"job","thresholds":[],"type":"hidden","unit":"short"},{"alias":"Cluster","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"mappingType":1,"pattern":"rabbitmq_cluster","thresholds":[],"type":"hidden","unit":"short","valueMaps":[]},{"alias":"prometheus.erl","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"mappingType":1,"pattern":"prometheus_client_version","thresholds":[],"type":"string","unit":"short"},{"alias":"rabbitmq_prometheus","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"mappingType":1,"pattern":"prometheus_plugin_version","thresholds":[],"type":"string","unit":"short"}],"targets":[{"expr":"rabbitmq_build_info * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}","format":"table","instant":true,"intervalFactor":1,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"","transform":"table","type":"table-old"},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"If the value is zero or less, the memory alarm will be triggered and all publishing connections across all cluster nodes will be blocked.\n\nThis value can temporarily go negative because the memory alarm is triggered with a slight delay.\n\nThe kernel's view of the amount of memory used by the node can differ from what the node itself can observe. This means that this value can be negative for a sustained period of time.\n\nBy default nodes use resident set size (RSS) to compute how much memory they use. This strategy can be changed (see the guides below).\n\n* [Alarms](https://www.rabbitmq.com/alarms.html)\n* [Memory Alarms](https://www.rabbitmq.com/memory.html)\n* [Reasoning About Memory Use](https://www.rabbitmq.com/memory-use.html)\n* [Blocked Connection Notifications](https://www.rabbitmq.com/connection-blocked.html)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":11},"hiddenSeries":false,"id":7,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/","color":"#56A64B"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/","color":"#F2CC0C"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/","color":"#3274D9"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/","color":"#A352CC"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/","color":"#FF780A"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/","color":"#96D98D"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/","color":"#FFEE52"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/","color":"#8AB8FF"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/","color":"#CA95E5"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/","color":"#FFB357"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"(rabbitmq_resident_memory_limit_bytes * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) -\n(rabbitmq_process_resident_memory_bytes * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"})","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[{"colorMode":"warning","fill":true,"line":true,"op":"lt","value":536870912,"yaxis":"left"},{"colorMode":"critical","fill":true,"line":true,"op":"lt","value":0,"yaxis":"left"}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Memory available before publishers blocked","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":1,"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"This metric is reported for the partition where the RabbitMQ data directory is stored.\n\nIf the value is zero or less, the disk alarm will be triggered and all publishing connections across all cluster nodes will be blocked.\n\nThis value can temporarily go negative because the free disk space alarm is triggered with a slight delay.\n\n* [Alarms](https://www.rabbitmq.com/alarms.html)\n* [Disk Space Alarms](https://www.rabbitmq.com/disk-alarms.html)\n* [Disk Space](https://www.rabbitmq.com/production-checklist.html#resource-limits-disk-space)\n* [Persistence Configuration](https://www.rabbitmq.com/persistence-conf.html)\n* [Blocked Connection Notifications](https://www.rabbitmq.com/connection-blocked.html)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"gridPos":{"h":8,"w":8,"x":12,"y":11},"hiddenSeries":false,"id":8,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/","color":"#56A64B"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/","color":"#F2CC0C"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/","color":"#3274D9"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/","color":"#A352CC"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/","color":"#FF780A"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/","color":"#96D98D"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/","color":"#FFEE52"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/","color":"#8AB8FF"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/","color":"#CA95E5"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/","color":"#FFB357"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"rabbitmq_disk_space_available_bytes * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"lt","value":1073741824,"yaxis":"left"},{"colorMode":"warning","fill":true,"line":true,"op":"lt","value":5368709120,"yaxis":"left"}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Disk space available before publishers blocked","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":1,"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"When this value reaches zero, new connections will not be accepted and disk write operations may fail.\n\nClient libraries, peer nodes and CLI tools will not be able to connect when the node runs out of available file descriptors.\n\n* [Open File Handles Limit](https://www.rabbitmq.com/production-checklist.html#resource-limits-file-handle-limit)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"gridPos":{"h":4,"w":4,"x":20,"y":11},"hiddenSeries":false,"id":2,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/","color":"#56A64B"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/","color":"#F2CC0C"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/","color":"#3274D9"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/","color":"#A352CC"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/","color":"#FF780A"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/","color":"#96D98D"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/","color":"#FFEE52"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/","color":"#8AB8FF"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/","color":"#CA95E5"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/","color":"#FFB357"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"(rabbitmq_process_max_fds * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) -\n(rabbitmq_process_open_fds * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"})","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"lt","value":500,"yaxis":"left"},{"colorMode":"warning","fill":true,"line":true,"op":"lt","value":1000,"yaxis":"left"}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"File descriptors available","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":-1,"format":"none","label":"","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"When this value reaches zero, new connections will not be accepted.\n\nClient libraries, peer nodes and CLI tools will not be able to connect when the node runs out of available file descriptors.\n\n* [Networking and RabbitMQ](https://www.rabbitmq.com/networking.html)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"gridPos":{"h":4,"w":4,"x":20,"y":15},"hiddenSeries":false,"id":5,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/","color":"#56A64B"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/","color":"#F2CC0C"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/","color":"#3274D9"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/","color":"#A352CC"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/","color":"#FF780A"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/","color":"#96D98D"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/","color":"#FFEE52"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/","color":"#8AB8FF"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/","color":"#CA95E5"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/","color":"#FFB357"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"(rabbitmq_process_max_tcp_sockets * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) -\n(rabbitmq_process_open_tcp_sockets * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"})","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"lt","value":500,"yaxis":"left"},{"colorMode":"warning","fill":true,"line":true,"op":"lt","value":1000,"yaxis":"left"}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"TCP sockets available","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":-1,"format":"none","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":"Prometheus","gridPos":{"h":1,"w":24,"x":0,"y":19},"id":27,"panels":[],"title":"QUEUED MESSAGES","type":"row"},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"Total number of ready messages ready to be delivered to consumers.\n\nAim to keep this value as low as possible. RabbitMQ behaves best when messages are flowing through it. It's OK for publishers to occasionally outpace consumers, but the expectation is that consumers will eventually process all ready messages.\n\nIf this metric keeps increasing, your system will eventually run out of memory and/or disk space. Consider using TTL or Queue Length Limit to prevent unbounded message growth.\n\n* [Queues](https://www.rabbitmq.com/queues.html)\n* [Consumers](https://www.rabbitmq.com/consumers.html)\n* [Queue Length Limit](https://www.rabbitmq.com/maxlength.html)\n* [Time-To-Live and Expiration](https://www.rabbitmq.com/ttl.html)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"gridPos":{"h":5,"w":12,"x":0,"y":20},"hiddenSeries":false,"id":9,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/","color":"#56A64B"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/","color":"#F2CC0C"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/","color":"#3274D9"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/","color":"#A352CC"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/","color":"#FF780A"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/","color":"#96D98D"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/","color":"#FFEE52"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/","color":"#8AB8FF"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/","color":"#CA95E5"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/","color":"#FFB357"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(rabbitmq_queue_messages_ready * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Messages ready to be delivered to consumers","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"The total number of messages that are either in-flight to consumers, currently being processed by consumers or simply waiting for the consumer acknowledgements to be processed by the queue. Until the queue processes the message acknowledgement, the message will remain unacknowledged.\n\n* [Queues](https://www.rabbitmq.com/queues.html)\n* [Confirms and Acknowledgements](https://www.rabbitmq.com/confirms.html)\n* [Consumer Prefetch](https://www.rabbitmq.com/consumer-prefetch.html)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"gridPos":{"h":5,"w":12,"x":12,"y":20},"hiddenSeries":false,"id":19,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/","color":"#56A64B"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/","color":"#F2CC0C"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/","color":"#3274D9"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/","color":"#A352CC"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/","color":"#FF780A"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/","color":"#96D98D"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/","color":"#FFEE52"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/","color":"#8AB8FF"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/","color":"#CA95E5"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/","color":"#FFB357"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(rabbitmq_queue_messages_unacked * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Messages pending consumer acknowledgement","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":"Prometheus","gridPos":{"h":1,"w":24,"x":0,"y":25},"id":11,"panels":[],"title":"INCOMING MESSAGES","type":"row"},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"The incoming message rate before any routing rules are applied.\n\nIf this value is lower than the number of messages published to queues, it may indicate that some messages are delivered to more than one queue.\n\nIf this value is higher than the number of messages published to queues, messages cannot be routed and will either be dropped or returned to publishers.\n\n* [Publishers](https://www.rabbitmq.com/publishers.html)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"gridPos":{"h":5,"w":12,"x":0,"y":26},"hiddenSeries":false,"id":13,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/","color":"#56A64B"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/","color":"#F2CC0C"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/","color":"#3274D9"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/","color":"#A352CC"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/","color":"#FF780A"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/","color":"#96D98D"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/","color":"#FFEE52"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/","color":"#8AB8FF"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/","color":"#CA95E5"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/","color":"#FFB357"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(rate(rabbitmq_channel_messages_published_total[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Messages published / s","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"The rate of messages confirmed by the broker to publishers. Publishers must opt-in to receive message confirmations.\n\nIf this metric is consistently at zero it may suggest that publisher confirms are not used by clients. The safety of published messages is likely to be at risk.\n\n* [Publisher Confirms](https://www.rabbitmq.com/confirms.html#publisher-confirms)\n* [Publisher Confirms and Data Safety](https://www.rabbitmq.com/publishers.html#data-safety)\n* [When Will Published Messages Be Confirmed by the Broker?](https://www.rabbitmq.com/confirms.html#when-publishes-are-confirmed)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"gridPos":{"h":5,"w":12,"x":12,"y":26},"hiddenSeries":false,"id":18,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/","color":"#56A64B"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/","color":"#F2CC0C"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/","color":"#3274D9"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/","color":"#A352CC"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/","color":"#FF780A"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/","color":"#96D98D"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/","color":"#FFEE52"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/","color":"#8AB8FF"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/","color":"#CA95E5"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/","color":"#FFB357"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(rate(rabbitmq_channel_messages_confirmed_total[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Messages confirmed to publishers / s","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"The rate of messages received from publishers and successfully routed to the master queue replicas.\n\n* [Queues](https://www.rabbitmq.com/queues.html)\n* [Publishers](https://www.rabbitmq.com/publishers.html)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"gridPos":{"h":5,"w":12,"x":0,"y":31},"hiddenSeries":false,"id":61,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/","color":"#56A64B"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/","color":"#F2CC0C"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/","color":"#3274D9"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/","color":"#A352CC"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/","color":"#FF780A"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/","color":"#96D98D"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/","color":"#FFEE52"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/","color":"#8AB8FF"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/","color":"#CA95E5"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/","color":"#FFB357"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(rate(rabbitmq_queue_messages_published_total[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Messages routed to queues / s","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"The rate of messages received from publishers that have publisher confirms enabled and the broker has not confirmed yet.\n\n* [Publishers](https://www.rabbitmq.com/publishers.html)\n* [Confirms and Acknowledgements](https://www.rabbitmq.com/confirms.html)\n* [When Will Published Messages Be Confirmed by the Broker?](https://www.rabbitmq.com/confirms.html#when-publishes-are-confirmed)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"gridPos":{"h":5,"w":12,"x":12,"y":31},"hiddenSeries":false,"id":12,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/","color":"#56A64B"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/","color":"#F2CC0C"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/","color":"#3274D9"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/","color":"#A352CC"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/","color":"#FF780A"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/","color":"#96D98D"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/","color":"#FFEE52"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/","color":"#8AB8FF"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/","color":"#CA95E5"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/","color":"#FFB357"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(rate(rabbitmq_channel_messages_unconfirmed[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Messages unconfirmed to publishers / s","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"The rate of messages that cannot be routed and are dropped. \n\nAny value above zero means message loss and likely suggests a routing problem on the publisher end.\n\n* [Unroutable Message Handling](https://www.rabbitmq.com/publishers.html#unroutable)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"gridPos":{"h":5,"w":12,"x":0,"y":36},"hiddenSeries":false,"id":34,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/rabbit/","color":"#C4162A"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(rate(rabbitmq_channel_messages_unroutable_dropped_total[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":0,"yaxis":"left"}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Unroutable messages dropped / s","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"The rate of messages that cannot be routed and are returned back to publishers.\n\nSustained values above zero may indicate a routing problem on the publisher end.\n\n* [Unroutable Message Handling](https://www.rabbitmq.com/publishers.html#unroutable)\n* [When Will Published Messages Be Confirmed by the Broker?](https://www.rabbitmq.com/confirms.html#when-publishes-are-confirmed)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"gridPos":{"h":5,"w":12,"x":12,"y":36},"hiddenSeries":false,"id":16,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/rabbit/","color":"#C4162A"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(rate(rabbitmq_channel_messages_unroutable_returned_total[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":0,"yaxis":"left"}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Unroutable messages returned to publishers / s","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":"Prometheus","gridPos":{"h":1,"w":24,"x":0,"y":41},"id":29,"panels":[],"title":"OUTGOING MESSAGES","type":"row"},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"The rate of messages delivered to consumers. It includes messages that have been redelivered.\n\nThis metric does not include messages that have been fetched by consumers using `basic.get` (consumed by polling).\n\n* [Consumers](https://www.rabbitmq.com/consumers.html)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"gridPos":{"h":5,"w":12,"x":0,"y":42},"hiddenSeries":false,"id":14,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/","color":"#56A64B"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/","color":"#F2CC0C"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/","color":"#3274D9"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/","color":"#A352CC"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/","color":"#FF780A"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/","color":"#96D98D"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/","color":"#FFEE52"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/","color":"#8AB8FF"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/","color":"#CA95E5"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/","color":"#FFB357"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(\n  (rate(rabbitmq_channel_messages_delivered_total[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) +\n  (rate(rabbitmq_channel_messages_delivered_ack_total[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"})\n) by(rabbitmq_node)","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Messages delivered / s","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"The rate of messages that have been redelivered to consumers. It includes messages that have been requeued automatically and redelivered due to channel exceptions or connection closures.\n\nHaving some redeliveries is expected, but if this metric is consistently non-zero, it is worth investigating why.\n\n* [Negative Acknowledgement and Requeuing of Deliveries](https://www.rabbitmq.com/confirms.html#consumer-nacks-requeue)\n* [Consumers](https://www.rabbitmq.com/consumers.html)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"gridPos":{"h":5,"w":12,"x":12,"y":42},"hiddenSeries":false,"id":15,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/","color":"#56A64B"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/","color":"#F2CC0C"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/","color":"#3274D9"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/","color":"#A352CC"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/","color":"#FF780A"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/","color":"#96D98D"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/","color":"#FFEE52"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/","color":"#8AB8FF"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/","color":"#CA95E5"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/","color":"#FFB357"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(rate(rabbitmq_channel_messages_redelivered_total[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[{"colorMode":"warning","fill":true,"line":true,"op":"gt","value":20,"yaxis":"left"},{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":100,"yaxis":"left"}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Messages redelivered / s","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"The rate of message deliveries to consumers that use manual acknowledgement mode.\n\nWhen this mode is used, RabbitMQ waits for consumers to acknowledge messages before more messages can be delivered.\n\nThis is the safest way of consuming messages.\n\n* [Consumer Acknowledgements](https://www.rabbitmq.com/confirms.html)\n* [Consumer Prefetch](https://www.rabbitmq.com/consumer-prefetch.html)\n* [Consumer Acknowledgement Modes, Prefetch and Throughput](https://www.rabbitmq.com/confirms.html#channel-qos-prefetch-throughput)\n* [Consumers](https://www.rabbitmq.com/consumers.html)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"gridPos":{"h":5,"w":12,"x":0,"y":47},"hiddenSeries":false,"id":20,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/","color":"#56A64B"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/","color":"#F2CC0C"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/","color":"#3274D9"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/","color":"#A352CC"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/","color":"#FF780A"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/","color":"#96D98D"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/","color":"#FFEE52"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/","color":"#8AB8FF"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/","color":"#CA95E5"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/","color":"#FFB357"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(rate(rabbitmq_channel_messages_delivered_ack_total[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Messages delivered with manual ack / s","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"The rate of message deliveries to consumers that use automatic acknowledgement mode.\n\nWhen this mode is used, RabbitMQ does not wait for consumers to acknowledge message deliveries.\n\nThis mode is fire-and-forget and does not offer any delivery safety guarantees. It tends to provide higher throughput and it may lead to consumer overload  and higher consumer memory usage.\n\n* [Consumer Acknowledgement Modes, Prefetch and Throughput](https://www.rabbitmq.com/confirms.html#channel-qos-prefetch-throughput)\n* [Consumers](https://www.rabbitmq.com/consumers.html)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"gridPos":{"h":5,"w":12,"x":12,"y":47},"hiddenSeries":false,"id":21,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/","color":"#56A64B"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/","color":"#F2CC0C"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/","color":"#3274D9"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/","color":"#A352CC"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/","color":"#FF780A"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/","color":"#96D98D"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/","color":"#FFEE52"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/","color":"#8AB8FF"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/","color":"#CA95E5"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/","color":"#FFB357"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(rate(rabbitmq_channel_messages_delivered_total[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Messages delivered auto ack / s","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"The rate of message acknowledgements coming from consumers that use manual acknowledgement mode.\n\n* [Consumer Acknowledgements](https://www.rabbitmq.com/confirms.html)\n* [Consumer Prefetch](https://www.rabbitmq.com/consumer-prefetch.html)\n* [Consumer Acknowledgement Modes, Prefetch and Throughput](https://www.rabbitmq.com/confirms.html#channel-qos-prefetch-throughput)\n* [Consumers](https://www.rabbitmq.com/consumers.html)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"gridPos":{"h":5,"w":12,"x":0,"y":52},"hiddenSeries":false,"id":22,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/","color":"#56A64B"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/","color":"#F2CC0C"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/","color":"#3274D9"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/","color":"#A352CC"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/","color":"#FF780A"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/","color":"#96D98D"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/","color":"#FFEE52"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/","color":"#8AB8FF"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/","color":"#CA95E5"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/","color":"#FFB357"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(rate(rabbitmq_channel_messages_acked_total[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Messages acknowledged / s","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"The rate of messages delivered to polling consumers that use automatic acknowledgement mode.\n\nThe use of polling consumers is highly inefficient and therefore strongly discouraged.\n\n* [Fetching individual messages](https://www.rabbitmq.com/consumers.html#fetching)\n* [Consumers](https://www.rabbitmq.com/consumers.html)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"gridPos":{"h":5,"w":12,"x":12,"y":52},"hiddenSeries":false,"id":24,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/rabbit/","color":"#C4162A"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(rate(rabbitmq_channel_get_total[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":0,"yaxis":"left"}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Polling operations with auto ack / s","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"The rate of polling consumer operations that yield no result.\n\nAny value above zero means that RabbitMQ resources are wasted by polling consumers.\n\nCompare this metric to the other polling consumer metrics to see the inefficiency rate.\n\nThe use of polling consumers is highly inefficient and therefore strongly discouraged.\n\n* [Fetching individual messages](https://www.rabbitmq.com/consumers.html#fetching)\n* [Consumers](https://www.rabbitmq.com/consumers.html)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"gridPos":{"h":5,"w":12,"x":0,"y":57},"hiddenSeries":false,"id":25,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":true,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/rabbit/","color":"#C4162A"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(rate(rabbitmq_channel_get_empty_total[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":0,"yaxis":"left"}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Polling operations that yield no result / s","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"The rate of messages delivered to polling consumers that use manual acknowledgement mode.\n\nThe use of polling consumers is highly inefficient and therefore strongly discouraged.\n\n* [Fetching individual messages](https://www.rabbitmq.com/consumers.html#fetching)\n* [Consumers](https://www.rabbitmq.com/consumers.html)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"gridPos":{"h":5,"w":12,"x":12,"y":57},"hiddenSeries":false,"id":23,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/rabbit/","color":"#C4162A"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(rate(rabbitmq_channel_get_ack_total[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":0,"yaxis":"left"}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Polling operations with manual ack / s","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":"Prometheus","gridPos":{"h":1,"w":24,"x":0,"y":62},"id":53,"panels":[],"title":"QUEUES","type":"row"},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"Total number of queue masters  per node. \n\nThis metric makes it easy to see sub-optimal queue distribution in a cluster.\n\n* [Queue Masters, Data Locality](https://www.rabbitmq.com/ha.html#master-migration-data-locality)\n* [Queues](https://www.rabbitmq.com/queues.html)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"gridPos":{"h":5,"w":12,"x":0,"y":63},"hiddenSeries":false,"id":57,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/","color":"#56A64B"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/","color":"#F2CC0C"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/","color":"#3274D9"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/","color":"#A352CC"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/","color":"#FF780A"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/","color":"#96D98D"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/","color":"#FFEE52"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/","color":"#8AB8FF"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/","color":"#CA95E5"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/","color":"#FFB357"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"rabbitmq_queues * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Total queues","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":-1,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"The rate of queue declarations performed by clients.\n\nLow sustained values above zero are to be expected. High rates may be indicative of queue churn or high rates of connection recovery. Confirm connection recovery rates by using the _Connections opened_ metric.\n\n* [Queues](https://www.rabbitmq.com/queues.html)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"gridPos":{"h":5,"w":4,"x":12,"y":63},"hiddenSeries":false,"id":58,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/","color":"#56A64B"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/","color":"#F2CC0C"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/","color":"#3274D9"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/","color":"#A352CC"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/","color":"#FF780A"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/","color":"#96D98D"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/","color":"#FFEE52"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/","color":"#8AB8FF"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/","color":"#CA95E5"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/","color":"#FFB357"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(rate(rabbitmq_queues_declared_total[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[{"colorMode":"warning","fill":true,"line":true,"op":"gt","value":2,"yaxis":"left"},{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":10,"yaxis":"left"}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Queues declared / s","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"The rate of new queues created (as opposed to redeclarations).\n\nLow sustained values above zero are to be expected. High rates may be indicative of queue churn or high rates of connection recovery. Confirm connection recovery rates by using the _Connections opened_ metric.\n\n* [Queues](https://www.rabbitmq.com/queues.html)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"gridPos":{"h":5,"w":4,"x":16,"y":63},"hiddenSeries":false,"id":60,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/","color":"#56A64B"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/","color":"#F2CC0C"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/","color":"#3274D9"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/","color":"#A352CC"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/","color":"#FF780A"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/","color":"#96D98D"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/","color":"#FFEE52"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/","color":"#8AB8FF"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/","color":"#CA95E5"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/","color":"#FFB357"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(rate(rabbitmq_queues_created_total[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[{"colorMode":"warning","fill":true,"line":true,"op":"gt","value":2,"yaxis":"left"},{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":10,"yaxis":"left"}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Queues created / s","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"The rate of queues deleted.\n\nLow sustained values above zero are to be expected. High rates may be indicative of queue churn or high rates of connection recovery. Confirm connection recovery rates by using the _Connections opened_ metric.\n\n* [Queues](https://www.rabbitmq.com/queues.html)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"gridPos":{"h":5,"w":4,"x":20,"y":63},"hiddenSeries":false,"id":59,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/","color":"#56A64B"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/","color":"#F2CC0C"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/","color":"#3274D9"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/","color":"#A352CC"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/","color":"#FF780A"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/","color":"#96D98D"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/","color":"#FFEE52"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/","color":"#8AB8FF"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/","color":"#CA95E5"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/","color":"#FFB357"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(rate(rabbitmq_queues_deleted_total[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[{"colorMode":"warning","fill":true,"line":true,"op":"gt","value":2,"yaxis":"left"},{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":10,"yaxis":"left"}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Queues deleted / s","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":"Prometheus","gridPos":{"h":1,"w":24,"x":0,"y":68},"id":51,"panels":[],"title":"CHANNELS","type":"row"},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"Total number of channels on all currently opened connections.\n\nIf this metric grows monotonically it is highly likely a channel leak in one of the applications. Confirm channel leaks by using the _Channels opened_ and _Channels closed_ metrics.\n\n* [Channel Leak](https://www.rabbitmq.com/channels.html#channel-leaks)\n* [Channels](https://www.rabbitmq.com/channels.html)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"gridPos":{"h":5,"w":12,"x":0,"y":69},"hiddenSeries":false,"id":54,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/","color":"#56A64B"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/","color":"#F2CC0C"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/","color":"#3274D9"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/","color":"#A352CC"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/","color":"#FF780A"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/","color":"#96D98D"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/","color":"#FFEE52"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/","color":"#8AB8FF"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/","color":"#CA95E5"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/","color":"#FFB357"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"rabbitmq_channels * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Total channels","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":-1,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"The rate of new channels opened by applications across all connections. Channels are expected to be long-lived.\n\nLow sustained values above zero are to be expected. High rates may be indicative of channel churn or mass connection recovery. Confirm connection recovery rates by using the _Connections opened_ metric.\n\n* [High Channel Churn](https://www.rabbitmq.com/channels.html#high-channel-churn)\n* [Channels](https://www.rabbitmq.com/channels.html)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"gridPos":{"h":5,"w":6,"x":12,"y":69},"hiddenSeries":false,"id":55,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/","color":"#56A64B"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/","color":"#F2CC0C"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/","color":"#3274D9"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/","color":"#A352CC"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/","color":"#FF780A"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/","color":"#96D98D"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/","color":"#FFEE52"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/","color":"#8AB8FF"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/","color":"#CA95E5"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/","color":"#FFB357"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(rate(rabbitmq_channels_opened_total[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[{"colorMode":"warning","fill":true,"line":true,"op":"gt","value":2,"yaxis":"left"},{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":10,"yaxis":"left"}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Channels opened / s","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"The rate of channels closed by applications across all connections. Channels are expected to be long-lived.\n\nLow sustained values above zero are to be expected. High rates may be indicative of channel churn or mass connection recovery. Confirm connection recovery rates by using the _Connections opened_ metric.\n\n* [High Channel Churn](https://www.rabbitmq.com/channels.html#high-channel-churn)\n* [Channels](https://www.rabbitmq.com/channels.html)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"gridPos":{"h":5,"w":6,"x":18,"y":69},"hiddenSeries":false,"id":56,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/","color":"#56A64B"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/","color":"#F2CC0C"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/","color":"#3274D9"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/","color":"#A352CC"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/","color":"#FF780A"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/","color":"#96D98D"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/","color":"#FFEE52"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/","color":"#8AB8FF"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/","color":"#CA95E5"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/","color":"#FFB357"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(rate(rabbitmq_channels_closed_total[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[{"colorMode":"warning","fill":true,"line":true,"op":"gt","value":2,"yaxis":"left"},{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":10,"yaxis":"left"}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Channels closed / s","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":"Prometheus","gridPos":{"h":1,"w":24,"x":0,"y":74},"id":46,"panels":[],"title":"CONNECTIONS","type":"row"},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"Total number of client connections.\n\nIf this metric grows monotonically it is highly likely a connection leak in one of the applications. Confirm connection leaks by using the _Connections opened_ and _Connections closed_ metrics.\n\n* [Connection Leak](https://www.rabbitmq.com/connections.html#monitoring)\n* [Connections](https://www.rabbitmq.com/connections.html)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"gridPos":{"h":5,"w":12,"x":0,"y":75},"hiddenSeries":false,"id":47,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/","color":"#56A64B"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/","color":"#F2CC0C"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/","color":"#3274D9"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/","color":"#A352CC"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/","color":"#FF780A"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/","color":"#96D98D"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/","color":"#FFEE52"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/","color":"#8AB8FF"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/","color":"#CA95E5"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/","color":"#FFB357"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"rabbitmq_connections * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Total connections","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":-1,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"The rate of new connections opened by clients. Connections are expected to be long-lived.\n\nLow sustained values above zero are to be expected. High rates may be indicative of connection churn or mass connection recovery.\n\n* [Connection Leak](https://www.rabbitmq.com/connections.html#monitoring)\n* [Connections](https://www.rabbitmq.com/connections.html)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"gridPos":{"h":5,"w":6,"x":12,"y":75},"hiddenSeries":false,"id":48,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/","color":"#56A64B"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/","color":"#F2CC0C"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/","color":"#3274D9"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/","color":"#A352CC"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/","color":"#FF780A"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/","color":"#96D98D"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/","color":"#FFEE52"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/","color":"#8AB8FF"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/","color":"#CA95E5"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/","color":"#FFB357"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(rate(rabbitmq_connections_opened_total[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[{"colorMode":"warning","fill":true,"line":true,"op":"gt","value":2,"yaxis":"left"},{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":10,"yaxis":"left"}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Connections opened / s","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"Prometheus","description":"The rate of connections closed. Connections are expected to be long-lived.\n\nLow sustained values above zero are to be expected. High rates may be indicative of connection churn or mass connection recovery.\n\n* [Connections](https://www.rabbitmq.com/connections.html)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"gridPos":{"h":5,"w":6,"x":18,"y":75},"hiddenSeries":false,"id":49,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/","color":"#56A64B"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/","color":"#F2CC0C"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/","color":"#3274D9"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/","color":"#A352CC"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/","color":"#FF780A"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/","color":"#96D98D"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/","color":"#FFEE52"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/","color":"#8AB8FF"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/","color":"#CA95E5"},{"alias":"/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/","color":"#FFB357"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(rate(rabbitmq_connections_closed_total[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{rabbitmq_node}}","refId":"A"}],"thresholds":[{"colorMode":"warning","fill":true,"line":true,"op":"gt","value":2,"yaxis":"left"},{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":10,"yaxis":"left"}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Connections closed / s","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"refresh":"15s","schemaVersion":26,"style":"dark","tags":["rabbitmq-prometheus"],"templating":{"list":[{"current":{"selected":false,"text":"default","value":"default"},"hide":2,"includeAll":false,"label":"datasource","multi":false,"name":"DS_PROMETHEUS","options":[],"query":"prometheus","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource","datasource":"Prometheus"},{"allValue":null,"current":{},"datasource":"Prometheus","definition":"label_values(rabbitmq_identity_info, namespace)","hide":0,"includeAll":false,"label":"Namespace","multi":false,"name":"namespace","options":[],"query":"label_values(rabbitmq_identity_info, namespace)","refresh":2,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{},"datasource":"Prometheus","definition":"label_values(rabbitmq_identity_info{namespace=\"$namespace\"}, rabbitmq_cluster)","error":null,"hide":0,"includeAll":false,"label":"RabbitMQ Cluster","multi":false,"name":"rabbitmq_cluster","options":[],"query":"label_values(rabbitmq_identity_info{namespace=\"$namespace\"}, rabbitmq_cluster)","refresh":2,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-15m","to":"now"},"timepicker":{"refresh_intervals":["15s","30s","1m","5m","10m"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"RabbitMQ Overview","uid":"Kn5xm-gZk","version":20210308,"__inputs":[{"name":"DS_PROMETHEUS","label":"prometheus","description":"","type":"datasource","pluginId":"prometheus","pluginName":"Prometheus"}]}
          datasource: Prometheus
        app-observability-alerts:
          json: |
            {"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"description":"Alerts for Application Observability","editable":true,"id":99,"uid":"cLV5GDCkz","links":[],"panels":[{"alert":{"alertRuleTags":{},"conditions":[{"evaluator":{"params":[0],"type":"gt"},"operator":{"type":"and"},"query":{"params":["A","5m","now-1m"]},"reducer":{"params":[],"type":"sum"},"type":"query"}],"executionErrorState":"alerting","for":"5m","frequency":"30s","handler":1,"name":"BadInputFiles Alert","noDataState":"ok","notifications":[]},"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fill":1,"fillGradient":0,"gridPos":{"h":8,"w":10,"x":0,"y":0},"hiddenSeries":false,"id":10,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"exemplar":true,"expr":"sum(Invalid_DVT_Ct)","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"failures","refId":"A"}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":0,"visible":true}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"BadInputFiles Alert","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"none","label":"cores","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"alert":{"alertRuleTags":{},"conditions":[{"evaluator":{"params":[0],"type":"gt"},"operator":{"type":"and"},"query":{"params":["A","5m","now-1m"]},"reducer":{"params":[],"type":"sum"},"type":"query"}],"executionErrorState":"alerting","for":"5m","frequency":"30s","handler":1,"name":"InternalServerError Alert","noDataState":"ok","notifications":[]},"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fill":1,"fillGradient":0,"gridPos":{"h":8,"w":10,"x":0,"y":0},"hiddenSeries":false,"id":10,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"exemplar":true,"expr":"sum(Convert_Fail_Ct)","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"failures","refId":"A"}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":0,"visible":true}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"InternalServerError Alert","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"none","label":"cores","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"refresh":"5s","schemaVersion":17,"style":"dark","tags":["alerts","open-telemetry","prometheus"],"templating":{"list":[]},"time":{"from":"now-30m","to":"now"},"timepicker":{"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"],"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"]},"timezone":"browser","hideControls":false,"graphTooltip":1,"version":0,"title":"Application Observability Alerts"}
          datasource: Prometheus
        # network-observability:
        #   json: |
        #     {"annotations":{"list":[{"builtIn":1,"datasource":{"type":"grafana","uid":"-- Grafana --"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"editable":true,"fiscalYearStartMonth":0,"gnetId":null,"graphTooltip":0,"id":11,"iteration":1671568904016,"links":[],"liveNow":false,"panels":[{"datasource":{"type":"mssql","uid":""},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"fillOpacity":70,"lineWidth":1},"mappings":[],"noValue":"-","thresholds":{"mode":"absolute","steps":[{"color":"red","value":null},{"color":"green","value":1}]},"unit":"locale"},"overrides":[]},"gridPos":{"h":9,"w":24,"x":0,"y":0},"id":30,"options":{"alignValue":"center","legend":{"displayMode":"hidden","placement":"bottom"},"mergeValues":false,"rowHeight":0.9,"showValue":"auto","tooltip":{"mode":"single","sort":"none"}},"targets":[{"alias":"","datasource":{"type":"mssql","uid":""},"format":"time_series","rawSql":"SET QUOTED_IDENTIFIER OFF;\r\nSELECT Collector as metric, $__timeGroup(Timestamp, $__interval, NULL) as 'time', COUNT_BIG(*) as value \r\nFROM PacketsView \r\nWHERE (\"$julianday\" = \"'-1'\" OR julianDay IN ($julianday)) AND (\"$collector\" = \"''\" OR Collector IN ($collector)) \r\nGROUP BY $__timeGroup(Timestamp, $__interval, NULL), Collector\r\nORDER BY time\r\nSET QUOTED_IDENTIFIER ON;","refId":"A"}],"title":"Data Availability","type":"state-timeline"},{"collapsed":false,"datasource":"mssql","gridPos":{"h":1,"w":24,"x":0,"y":9},"id":11,"panels":[],"title":"Overview","type":"row"},{"datasource":{"type":"mssql","uid":""},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"locale"},"overrides":[]},"gridPos":{"h":4,"w":3,"x":0,"y":10},"id":13,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.2.3","targets":[{"alias":"","datasource":{"type":"mssql","uid":""},"format":"table","rawSql":"SET QUOTED_IDENTIFIER OFF;\nselect count_big(*) as 'Number of packets' from PacketsView where (\"$julianday\" = \"'-1'\" OR julianDay IN ($julianday)) AND (\"$collector\" = \"''\" OR Collector IN ($collector))\nSET QUOTED_IDENTIFIER ON;","refId":"A"}],"title":"Number of Packets","transparent":true,"type":"stat"},{"datasource":{"type":"mssql","uid":""},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"decbytes"},"overrides":[]},"gridPos":{"h":4,"w":3,"x":3,"y":10},"id":25,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.2.3","targets":[{"alias":"","datasource":{"type":"mssql","uid":""},"format":"table","rawSql":"SET QUOTED_IDENTIFIER OFF;\nselect sum(cast(IpPacketSize as BIGINT)) as 'Amount of data transfered' from PacketsView where (\"$julianday\" = \"'-1'\" OR julianDay IN ($julianday)) AND (\"$collector\" = \"''\" OR Collector IN ($collector))\nSET QUOTED_IDENTIFIER ON;","refId":"A"}],"title":"Data Transferred","transparent":true,"type":"stat"},{"datasource":{"type":"mssql","uid":""},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"left","displayMode":"gradient-gauge","filterable":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"locale"},"overrides":[{"matcher":{"id":"byName","options":"Protocol Type"},"properties":[{"id":"custom.displayMode","value":"color-text"}]}]},"gridPos":{"h":6,"w":4,"x":6,"y":10},"id":17,"options":{"footer":{"fields":[],"reducer":["sum"],"show":true},"showHeader":true},"pluginVersion":"8.2.3","targets":[{"alias":"","datasource":{"type":"mssql","uid":""},"format":"table","rawSql":"SET QUOTED_IDENTIFIER OFF;\nselect top 3 t.ProtocolType as 'Protocol Type', count_big(*) as 'Packet count'\nfrom PacketsView p\nleft join ProtocolTypes t on p.Protocol = t.ProtocolTypeID\nwhere (\"$julianday\" = \"'-1'\" OR julianDay IN ($julianday)) AND (\"$collector\" = \"''\" OR Collector IN ($collector))\ngroup by t.ProtocolType\norder by 2 desc\nSET QUOTED_IDENTIFIER ON;","refId":"A"}],"title":"Protocols Used","transparent":true,"type":"table"},{"datasource":{"type":"mssql","uid":""},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]}},"overrides":[]},"gridPos":{"h":4,"w":3,"x":18,"y":10},"id":23,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.2.3","targets":[{"alias":"","datasource":{"type":"mssql","uid":""},"format":"table","rawSql":"SET QUOTED_IDENTIFIER OFF;\nselect count(distinct SourceIP) as 'Number of distinct source IPs' from PacketsView where (\"$julianday\" = \"'-1'\" OR julianDay IN ($julianday)) AND (\"$collector\" = \"''\" OR Collector IN ($collector))\nSET QUOTED_IDENTIFIER ON;","refId":"A"}],"title":"Source IPs","transparent":true,"type":"stat"},{"datasource":{"type":"mssql","uid":""},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]}},"overrides":[]},"gridPos":{"h":4,"w":3,"x":21,"y":10},"id":22,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.2.3","targets":[{"alias":"","datasource":{"type":"mssql","uid":""},"format":"table","rawSql":"SET QUOTED_IDENTIFIER OFF;\nselect count(distinct DestinationIP) as 'Number of distinct destination IPs' from PacketsView where (\"$julianday\" = \"'-1'\" OR julianDay IN ($julianday)) AND (\"$collector\" = \"''\" OR Collector IN ($collector))\nSET QUOTED_IDENTIFIER ON;","refId":"A"}],"title":"Destination IPs","transparent":true,"type":"stat"},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":16},"id":28,"panels":[],"title":"Top 3 Active Ports","type":"row"},{"datasource":{"type":"mssql","uid":""},"description":"","fieldConfig":{"defaults":{"color":{"fixedColor":"blue","mode":"thresholds"},"custom":{"align":"left","displayMode":"gradient-gauge","filterable":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[{"matcher":{"id":"byName","options":"Source Port"},"properties":[{"id":"unit","value":"string"},{"id":"custom.displayMode","value":"color-text"}]}]},"gridPos":{"h":5,"w":12,"x":0,"y":17},"id":24,"options":{"footer":{"enablePagination":false,"fields":[],"reducer":["sum"],"show":true},"showHeader":true},"pluginVersion":"8.2.3","targets":[{"alias":"","datasource":{"type":"mssql","uid":""},"format":"table","rawSql":"SET QUOTED_IDENTIFIER OFF;\r\nselect top(3) cast(SourcePort as VARCHAR(5)) as 'Source Port', convert(decimal(19,2),(sum(cast(IpPacketSize as BIGINT)) *1.0) / power(2,20)) as MB from PacketsView\r\nwhere (\"$julianday\" = \"'-1'\" OR julianDay IN ($julianday)) AND (\"$collector\" = \"''\" OR Collector IN ($collector))\r\ngroup by SourcePort\r\norder by MB desc\r\nSET QUOTED_IDENTIFIER ON;","refId":"A"}],"transparent":true,"type":"table"},{"datasource":{"type":"mssql","uid":""},"description":"","fieldConfig":{"defaults":{"color":{"fixedColor":"green","mode":"thresholds"},"custom":{"align":"left","displayMode":"gradient-gauge","filterable":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[{"matcher":{"id":"byName","options":"Destination Port"},"properties":[{"id":"unit","value":"string"},{"id":"custom.displayMode","value":"color-text"}]}]},"gridPos":{"h":5,"w":12,"x":12,"y":17},"id":26,"options":{"footer":{"enablePagination":false,"fields":"","reducer":["sum"],"show":true},"showHeader":true},"pluginVersion":"8.2.3","targets":[{"alias":"","datasource":{"type":"mssql","uid":""},"format":"table","rawSql":"SET QUOTED_IDENTIFIER OFF;\r\nselect top(3) cast(DestinationPort as VARCHAR(5)) as 'Destination Port', convert(decimal(19,2),(sum(cast(IpPacketSize as BIGINT)) *1.0) / power(2,20)) as MB from PacketsView\r\nwhere (\"$julianday\" = \"'-1'\" OR julianDay IN ($julianday)) AND (\"$collector\" = \"''\" OR Collector IN ($collector))\r\ngroup by DestinationPort\r\norder by MB desc\r\nSET QUOTED_IDENTIFIER ON;","refId":"A"}],"transparent":true,"type":"table"},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":22},"id":5,"panels":[],"title":"Packet Counts","type":"row"},{"datasource":{"type":"mssql","uid":""},"description":"","fieldConfig":{"defaults":{"color":{"fixedColor":"blue","mode":"fixed"},"custom":{"axisLabel":"Packet Count","axisPlacement":"auto","axisSoftMin":0,"fillOpacity":80,"gradientMode":"hue","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineWidth":0},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"locale"},"overrides":[{"matcher":{"id":"byName","options":"metric"},"properties":[{"id":"displayName","value":"Data Collector"}]},{"matcher":{"id":"byName","options":"value"},"properties":[{"id":"displayName","value":"Packet Count"}]}]},"gridPos":{"h":13,"w":11,"x":0,"y":23},"id":2,"options":{"barRadius":0,"barWidth":0.95,"groupWidth":0.7,"legend":{"calcs":[],"displayMode":"hidden","placement":"bottom"},"orientation":"vertical","showValue":"auto","stacking":"none","text":{},"tooltip":{"mode":"single","sort":"none"},"xTickLabelRotation":-45,"xTickLabelSpacing":0},"pluginVersion":"8.5.3","targets":[{"alias":"","datasource":{"type":"mssql"},"format":"table","rawSql":"SET QUOTED_IDENTIFIER OFF;\r\nSELECT\r\n\t Collector as metric,\r\n\t count_big(*) as value\r\n\tFROM\r\n\t PacketsView\r\n\tWHERE\r\n\t (\"$julianday\" = \"'-1'\" OR julianDay IN ($julianday)) AND (\"$collector\" = \"''\" OR Collector IN ($collector))\r\n\tGROUP BY\r\n\t Collector\r\n\tORDER BY\r\n\t Value DESC\r\nSET QUOTED_IDENTIFIER ON;","refId":"A"}],"title":"Packet Count by Data Collector","type":"barchart"},{"datasource":{"type":"mssql","uid":""},"fieldConfig":{"defaults":{"color":{"fixedColor":"light-blue","mode":"palette-classic"},"custom":{"axisLabel":"Packet Count","axisPlacement":"auto","axisSoftMin":0,"fillOpacity":75,"gradientMode":"hue","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineWidth":2},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"blue","value":null}]},"unit":"locale"},"overrides":[{"matcher":{"id":"byName","options":"destinationip"},"properties":[{"id":"displayName","value":"Destination IP"}]}]},"gridPos":{"h":13,"w":13,"x":11,"y":23},"id":3,"options":{"barRadius":0,"barWidth":0.9,"groupWidth":0.7,"legend":{"calcs":[],"displayMode":"list","placement":"right"},"orientation":"vertical","showValue":"always","stacking":"normal","text":{},"tooltip":{"mode":"single","sort":"none"},"xField":"DestinationIP","xTickLabelRotation":-45,"xTickLabelSpacing":0},"pluginVersion":"9.0.2","targets":[{"alias":"","datasource":{"type":"mssql"},"format":"table","rawSql":"SET QUOTED_IDENTIFIER OFF;\r\nDECLARE \r\n @columns NVARCHAR(MAX) = '', \r\n @sql NVARCHAR(MAX) = '';\r\n\r\n-- Select the source ips to pivot to columns\r\nSELECT \r\n @columns+=QUOTENAME(SourceIP) + ','\r\nFROM (\r\n\tSELECT DISTINCT SourceIP\r\n\tFROM PacketsView\r\n\tWHERE (\"$julianday\" = \"'-1'\" OR julianDay IN ($julianday)) AND (\"$collector\" = \"''\" OR Collector IN ($collector))\r\n) sips\r\nORDER BY SourceIP\r\n\r\n-- Remove the last comma\r\nSET @columns = LEFT(@columns, LEN(@columns) - 1);\r\n\r\n-- Construct dynamic SQL\r\nSET @sql =\"\r\nSET QUOTED_IDENTIFIER OFF;\r\nSELECT * FROM \r\n(\r\n SELECT \r\n SourceIP, \r\n DestinationIP\r\n FROM \r\n PacketsView p\r\n WHERE (\"\"\"+\"$julianday\"+\"\"\" = \"\"'-1'\"\" OR julianDay IN ($julianday)) AND (\"\"\"+\"$collector\"+\"\"\" = \"\"''\"\" OR Collector IN ($collector))\r\n) t \r\nPIVOT(\r\n COUNT_BIG(SourceIP)\r\n FOR SourceIP IN (\"+ @columns +\")\r\n) AS pivot_table\r\n\r\nORDER BY CAST(PARSENAME([DestinationIP], 4) AS INT),\r\n CAST(PARSENAME([DestinationIP], 3) AS INT),\r\n CAST(PARSENAME([DestinationIP], 2) AS INT),\r\n CAST(PARSENAME([DestinationIP], 1) AS INT);\";\r\n\r\n-- Execute the dynamic SQL\r\nEXECUTE sp_executesql @sql;\r\nSET QUOTED_IDENTIFIER ON;","refId":"A"}],"title":"Packet Count from Source to Destination IP","transformations":[],"type":"barchart"},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":36},"id":7,"panels":[],"title":"Traffic Load","type":"row"},{"datasource":{"type":"mssql","uid":""},"description":"","fieldConfig":{"defaults":{"color":{"fixedColor":"blue","mode":"fixed"},"custom":{"axisLabel":"Traffic Load","axisPlacement":"auto","axisSoftMin":0,"fillOpacity":80,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineWidth":0},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"decbytes"},"overrides":[{"matcher":{"id":"byName","options":"value"},"properties":[{"id":"displayName","value":"Traffic load"}]}]},"gridPos":{"h":11,"w":11,"x":0,"y":37},"id":18,"options":{"barRadius":0,"barWidth":0.95,"groupWidth":0.7,"legend":{"calcs":[],"displayMode":"hidden","placement":"bottom"},"orientation":"vertical","showValue":"always","stacking":"none","text":{},"tooltip":{"mode":"single","sort":"none"},"xTickLabelRotation":-45,"xTickLabelSpacing":0},"pluginVersion":"8.5.3","targets":[{"alias":"","datasource":{"type":"mssql"},"format":"table","rawSql":"SET QUOTED_IDENTIFIER OFF;\r\nselect sum(cast(IpPacketSize as BIGINT)) as value, Collector from PacketsView\r\n\tWHERE\r\n\t (\"$julianday\" = \"'-1'\" OR julianDay IN ($julianday)) AND (\"$collector\" = \"''\" OR Collector IN ($collector))\r\n\tGROUP BY\r\n\t Collector\r\nSET QUOTED_IDENTIFIER ON;","refId":"A"}],"title":"Traffic Load by Collector","type":"barchart"},{"datasource":{"type":"mssql","uid":""},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"Traffic Load","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"smooth","lineWidth":1,"pointSize":4,"scaleDistribution":{"log":2,"type":"log"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":11,"w":13,"x":11,"y":37},"id":19,"interval":"1m","options":{"legend":{"calcs":[],"displayMode":"list","placement":"right","sortBy":"Total","sortDesc":true},"tooltip":{"mode":"single","sort":"none"}},"pluginVersion":"8.5.3","targets":[{"alias":"","datasource":{"type":"mssql","uid":""},"format":"time_series","rawSql":"SET QUOTED_IDENTIFIER OFF;\r\nselect t.ProtocolType as metric, sum(cast(IpPacketSize as BIGINT)) as value, $__timeGroup(Timestamp, $__interval) as time\r\nfrom PacketsView p\r\nleft join ProtocolTypes t on p.Protocol = t.ProtocolTypeID\r\nwhere (\"$julianday\" = \"'-1'\" OR julianDay IN ($julianday)) AND (\"$collector\" = \"''\" OR Collector IN ($collector))\r\ngroup by $__timeGroup(Timestamp, $__interval), t.ProtocolType\r\norder by time\r\nSET QUOTED_IDENTIFIER ON;","refId":"A"}],"title":"Traffic Load by Protocol over Time","transformations":[],"type":"timeseries"},{"datasource":{"type":"mssql","uid":""},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"Traffic Load","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"smooth","lineWidth":1,"pointSize":4,"scaleDistribution":{"log":2,"type":"log"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":18,"w":24,"x":0,"y":48},"id":9,"options":{"legend":{"calcs":["sum"],"displayMode":"list","placement":"right","sortBy":"Total","sortDesc":true},"tooltip":{"mode":"single","sort":"none"}},"targets":[{"alias":"","datasource":{"type":"mssql"},"format":"time_series","rawSql":"SET QUOTED_IDENTIFIER OFF;\nselect SourceIP as metric, sum(cast(IpPacketSize as BIGINT)) as value, $__timeGroup(Timestamp, $__interval) as time\nfrom PacketsView \nwhere (\"$julianday\" = \"'-1'\" OR julianDay IN ($julianday)) AND (\"$collector\" = \"''\" OR Collector IN ($collector))\ngroup by $__timeGroup(Timestamp, $__interval), SourceIP\norder by 3\nSET QUOTED_IDENTIFIER ON;","refId":"A"}],"title":"Traffic Load by Source IP over Time","type":"timeseries"},{"datasource":{"type":"mssql","uid":""},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"Traffic Load","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"smooth","lineWidth":1,"pointSize":4,"scaleDistribution":{"log":2,"type":"log"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":19,"w":24,"x":0,"y":66},"id":20,"options":{"legend":{"calcs":["sum"],"displayMode":"table","placement":"right","sortBy":"Total","sortDesc":true},"tooltip":{"mode":"single","sort":"none"}},"targets":[{"alias":"","datasource":{"type":"mssql","uid":""},"format":"time_series","rawSql":"SET QUOTED_IDENTIFIER OFF;\nselect DestinationIP as metric, sum(cast(IpPacketSize as BIGINT)) as value, $__timeGroup(Timestamp, $__interval) as time\nfrom PacketsView \nwhere (\"$julianday\" = \"'-1'\" OR julianDay IN ($julianday)) AND (\"$collector\" = \"''\" OR Collector IN ($collector))\ngroup by $__timeGroup(Timestamp, $__interval), DestinationIP\norder by 3\nSET QUOTED_IDENTIFIER ON;","refId":"A"}],"title":"Traffic Load by Destination IP over Time","type":"timeseries"},{"datasource":{"type":"mssql","uid":""},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"Traffic Load","axisPlacement":"auto","axisSoftMin":0,"fillOpacity":80,"gradientMode":"hue","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineWidth":2},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"blue","value":null}]},"unit":"bytes"},"overrides":[{"matcher":{"id":"byName","options":"DestinationIP"},"properties":[{"id":"displayName","value":"Destination IP"}]}]},"gridPos":{"h":19,"w":24,"x":0,"y":85},"id":21,"options":{"barRadius":0,"barWidth":0.9,"groupWidth":0.7,"legend":{"calcs":[],"displayMode":"list","placement":"right"},"orientation":"vertical","showValue":"auto","stacking":"normal","text":{},"tooltip":{"mode":"single","sort":"none"},"xField":"DestinationIP","xTickLabelRotation":-45,"xTickLabelSpacing":0},"targets":[{"alias":"","datasource":{"type":"mssql","uid":""},"format":"table","rawSql":"SET QUOTED_IDENTIFIER OFF;\r\nDECLARE \r\n @columns NVARCHAR(MAX) = '', \r\n @sql NVARCHAR(MAX) = '';\r\n\r\n-- Select the source ips to pivot to columns\r\nSELECT \r\n @columns+=QUOTENAME(SourceIP) + ','\r\nFROM (\r\n\tSELECT DISTINCT SourceIP\r\n\tFROM PacketsView\r\n\tWHERE (\"$julianday\" = \"'-1'\" OR julianDay IN ($julianday)) AND (\"$collector\" = \"''\" OR Collector IN ($collector))\r\n) sips\r\nORDER BY SourceIP\r\n\r\n-- Remove the last comma\r\nSET @columns = LEFT(@columns, LEN(@columns) - 1);\r\n\r\n-- Construct dynamic SQL\r\nSET @sql =\"\r\nSET QUOTED_IDENTIFIER OFF;\r\nSELECT * FROM \r\n(\r\n SELECT \r\n SourceIP, \r\n DestinationIP,\r\n CAST(IpPacketSize AS BIGINT) AS BigIpPacketSize\r\n FROM \r\n PacketsView p\r\n WHERE (\"\"\"+\"$julianday\"+\"\"\" = \"\"'-1'\"\" OR julianDay IN ($julianday)) AND (\"\"\"+\"$collector\"+\"\"\" = \"\"''\"\" OR Collector IN ($collector))\r\n) t \r\nPIVOT(\r\n SUM(BigIpPacketSize)\r\n FOR SourceIP IN (\"+ @columns +\")\r\n) AS pivot_table\r\n\r\nORDER BY CAST(PARSENAME([DestinationIP], 4) AS INT),\r\n CAST(PARSENAME([DestinationIP], 3) AS INT),\r\n CAST(PARSENAME([DestinationIP], 2) AS INT),\r\n CAST(PARSENAME([DestinationIP], 1) AS INT);\";\r\n\r\n-- Execute the dynamic SQL\r\nEXECUTE sp_executesql @sql;\r\nSET QUOTED_IDENTIFIER ON;","refId":"A"}],"title":"Traffic Load from Source to Destination IP","type":"barchart"}],"refresh":true,"schemaVersion":31,"style":"dark","tags":[],"templating":{"list":[{"allValue":"''","current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":{"type":"mssql","uid":""},"definition":"select distinct Collector from PacketsView","description":"Data Collector","error":{},"hide":0,"includeAll":true,"label":"Collector","multi":true,"name":"collector","options":[],"query":"select distinct Collector from PacketsView","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"type":"query"},{"allValue":"'-1'","current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":{"type":"mssql","uid":""},"definition":"select distinct julianDay from PacketsView","description":null,"error":{},"hide":0,"includeAll":true,"label":"Julian day","multi":true,"name":"julianday","options":[],"query":"select distinct julianDay from PacketsView","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"type":"query"}]},"time":{"from":"now-24h","to":"now"},"timepicker":{},"timezone":"","title":"Network Observability","uid":"sG-n1vq7k","version":1}
        #   datasource: mssql
